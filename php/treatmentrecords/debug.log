2025-12-07 11:07:36 - Received save request: {"action":"save","patient_id":"2","visit_id":"0","oral_data":[{"type":"condition","tooth_id":"18","condition_code":"D","box_key":"P-18-center","color":"blue","case_type":"permanent"},{"type":"condition","tooth_id":"48","condition_code":"D","box_key":"T-48-center","color":"blue","case_type":"permanent"},{"type":"treatment","tooth_id":"18","treatment_code":"FG","box_key":"R1-0","color":"","case_type":"permanent"},{"type":"condition","tooth_id":"18","condition_code":"D","box_key":"R2-0","color":"blue","case_type":"permanent"},{"type":"condition","tooth_id":"18","condition_code":"D","box_key":"R3-0","color":"blue","case_type":"permanent"},{"type":"treatment","tooth_id":"18","treatment_code":"FG","box_key":"R4-0","color":"","case_type":"permanent"}]}
2025-12-07 11:07:36 - Parsed input: Array
(
    [action] => save
    [patient_id] => 2
    [visit_id] => 0
    [oral_data] => Array
        (
            [0] => Array
                (
                    [type] => condition
                    [tooth_id] => 18
                    [condition_code] => D
                    [box_key] => P-18-center
                    [color] => blue
                    [case_type] => permanent
                )

            [1] => Array
                (
                    [type] => condition
                    [tooth_id] => 48
                    [condition_code] => D
                    [box_key] => T-48-center
                    [color] => blue
                    [case_type] => permanent
                )

            [2] => Array
                (
                    [type] => treatment
                    [tooth_id] => 18
                    [treatment_code] => FG
                    [box_key] => R1-0
                    [color] => 
                    [case_type] => permanent
                )

            [3] => Array
                (
                    [type] => condition
                    [tooth_id] => 18
                    [condition_code] => D
                    [box_key] => R2-0
                    [color] => blue
                    [case_type] => permanent
                )

            [4] => Array
                (
                    [type] => condition
                    [tooth_id] => 18
                    [condition_code] => D
                    [box_key] => R3-0
                    [color] => blue
                    [case_type] => permanent
                )

            [5] => Array
                (
                    [type] => treatment
                    [tooth_id] => 18
                    [treatment_code] => FG
                    [box_key] => R4-0
                    [color] => 
                    [case_type] => permanent
                )

        )

)

2025-12-07 11:07:36 - Starting transaction
2025-12-07 11:07:36 - Created new visit_id: 11 for patient: 2
2025-12-07 11:07:36 - Processing item 0: Array
(
    [type] => condition
    [tooth_id] => 18
    [condition_code] => D
    [box_key] => P-18-center
    [color] => blue
    [case_type] => permanent
)

2025-12-07 11:07:36 - Resolving tooth_id for: '18'
2025-12-07 11:07:36 - Found tooth by tooth_id: 18 => 18
2025-12-07 11:07:36 - Item details: type=condition, tooth=18, box=P-18-center
2025-12-07 11:07:36 - Processing condition: 'D', caseType: permanent
2025-12-07 11:07:36 - Looking for condition: 'D', caseType: permanent, isPermanent: 1
2025-12-07 11:07:36 - Found condition_id: 2 for 'D' in column code
2025-12-07 11:07:36 - Inserting condition: visit_id=11, tooth_id=18, condition_id=2, box_key='P-18-center', color='blue', case_type='permanent'
2025-12-07 11:07:36 - Condition inserted successfully
2025-12-07 11:07:36 - Processing item 1: Array
(
    [type] => condition
    [tooth_id] => 48
    [condition_code] => D
    [box_key] => T-48-center
    [color] => blue
    [case_type] => permanent
)

2025-12-07 11:07:36 - Resolving tooth_id for: '48'
2025-12-07 11:07:36 - Found tooth by tooth_id: 48 => 48
2025-12-07 11:07:36 - Item details: type=condition, tooth=48, box=T-48-center
2025-12-07 11:07:36 - Processing condition: 'D', caseType: permanent
2025-12-07 11:07:36 - Looking for condition: 'D', caseType: permanent, isPermanent: 1
2025-12-07 11:07:36 - Found condition_id: 2 for 'D' in column code
2025-12-07 11:07:36 - Inserting condition: visit_id=11, tooth_id=48, condition_id=2, box_key='T-48-center', color='blue', case_type='permanent'
2025-12-07 11:07:36 - Condition inserted successfully
2025-12-07 11:07:36 - Processing item 2: Array
(
    [type] => treatment
    [tooth_id] => 18
    [treatment_code] => FG
    [box_key] => R1-0
    [color] => 
    [case_type] => permanent
)

2025-12-07 11:07:36 - Resolving tooth_id for: '18'
2025-12-07 11:07:36 - Found tooth by tooth_id: 18 => 18
2025-12-07 11:07:36 - Item details: type=treatment, tooth=18, box=R1-0
2025-12-07 11:07:36 - Processing treatment: 'FG'
2025-12-07 11:07:36 - Looking for treatment: 'FG'
2025-12-07 11:07:36 - Found treatment_id: 9 for 'FG'
2025-12-07 11:07:36 - Inserting treatment: visit_id=11, tooth_id=18, treatment_id=9, box_key='R1-0', color='', case_type='permanent'
2025-12-07 11:07:36 - Treatment inserted successfully
2025-12-07 11:07:36 - Processing item 3: Array
(
    [type] => condition
    [tooth_id] => 18
    [condition_code] => D
    [box_key] => R2-0
    [color] => blue
    [case_type] => permanent
)

2025-12-07 11:07:36 - Resolving tooth_id for: '18'
2025-12-07 11:07:36 - Found tooth by tooth_id: 18 => 18
2025-12-07 11:07:36 - Item details: type=condition, tooth=18, box=R2-0
2025-12-07 11:07:36 - Processing condition: 'D', caseType: permanent
2025-12-07 11:07:36 - Looking for condition: 'D', caseType: permanent, isPermanent: 1
2025-12-07 11:07:36 - Found condition_id: 2 for 'D' in column code
2025-12-07 11:07:36 - Inserting condition: visit_id=11, tooth_id=18, condition_id=2, box_key='R2-0', color='blue', case_type='permanent'
2025-12-07 11:07:36 - Condition inserted successfully
2025-12-07 11:07:36 - Processing item 4: Array
(
    [type] => condition
    [tooth_id] => 18
    [condition_code] => D
    [box_key] => R3-0
    [color] => blue
    [case_type] => permanent
)

2025-12-07 11:07:36 - Resolving tooth_id for: '18'
2025-12-07 11:07:36 - Found tooth by tooth_id: 18 => 18
2025-12-07 11:07:36 - Item details: type=condition, tooth=18, box=R3-0
2025-12-07 11:07:36 - Processing condition: 'D', caseType: permanent
2025-12-07 11:07:36 - Looking for condition: 'D', caseType: permanent, isPermanent: 1
2025-12-07 11:07:36 - Found condition_id: 2 for 'D' in column code
2025-12-07 11:07:36 - Inserting condition: visit_id=11, tooth_id=18, condition_id=2, box_key='R3-0', color='blue', case_type='permanent'
2025-12-07 11:07:36 - Condition inserted successfully
2025-12-07 11:07:36 - Processing item 5: Array
(
    [type] => treatment
    [tooth_id] => 18
    [treatment_code] => FG
    [box_key] => R4-0
    [color] => 
    [case_type] => permanent
)

2025-12-07 11:07:36 - Resolving tooth_id for: '18'
2025-12-07 11:07:36 - Found tooth by tooth_id: 18 => 18
2025-12-07 11:07:36 - Item details: type=treatment, tooth=18, box=R4-0
2025-12-07 11:07:36 - Processing treatment: 'FG'
2025-12-07 11:07:36 - Looking for treatment: 'FG'
2025-12-07 11:07:36 - Found treatment_id: 9 for 'FG'
2025-12-07 11:07:36 - Inserting treatment: visit_id=11, tooth_id=18, treatment_id=9, box_key='R4-0', color='', case_type='permanent'
2025-12-07 11:07:36 - Treatment inserted successfully
2025-12-07 11:07:36 - Transaction committed successfully. Inserted: 6 items
2025-12-07 11:07:36 - Sending response: {"success":true,"visit_id":"11","inserted":6,"warnings":[]}
2025-12-07 11:09:43 - Received save request: {"action":"save","patient_id":"2","visit_id":"0","oral_data":[{"type":"condition","tooth_id":"62","condition_code":"M","box_key":"P-62-center","color":"blue","case_type":"permanent"},{"type":"condition","tooth_id":"63","condition_code":"M","box_key":"P-63-center","color":"blue","case_type":"temporary"},{"type":"condition","tooth_id":"22","condition_code":"M","box_key":"P-22-center","color":"blue","case_type":"permanent"},{"type":"condition","tooth_id":"23","condition_code":"M","box_key":"P-23-center","color":"blue","case_type":"temporary"},{"type":"condition","tooth_id":"32","condition_code":"M","box_key":"T-32-center","color":"blue","case_type":"permanent"},{"type":"condition","tooth_id":"33","condition_code":"M","box_key":"T-33-center","color":"blue","case_type":"temporary"},{"type":"condition","tooth_id":"72","condition_code":"M","box_key":"T-72-center","color":"blue","case_type":"permanent"},{"type":"condition","tooth_id":"73","condition_code":"M","box_key":"T-73-center","color":"blue","case_type":"temporary"},{"type":"treatment","tooth_id":"22","treatment_code":"FG","box_key":"R1-9","color":"","case_type":"permanent"},{"type":"condition","tooth_id":"22","condition_code":"M","box_key":"R2-9","color":"blue","case_type":"permanent"},{"type":"condition","tooth_id":"23","condition_code":"M","box_key":"R2-10","color":"blue","case_type":"temporary"},{"type":"condition","tooth_id":"22","condition_code":"M","box_key":"R3-9","color":"blue","case_type":"permanent"},{"type":"condition","tooth_id":"23","condition_code":"M","box_key":"R3-10","color":"blue","case_type":"temporary"},{"type":"treatment","tooth_id":"22","treatment_code":"FG","box_key":"R4-9","color":"","case_type":"permanent"}]}
2025-12-07 11:09:43 - Parsed input: Array
(
    [action] => save
    [patient_id] => 2
    [visit_id] => 0
    [oral_data] => Array
        (
            [0] => Array
                (
                    [type] => condition
                    [tooth_id] => 62
                    [condition_code] => M
                    [box_key] => P-62-center
                    [color] => blue
                    [case_type] => permanent
                )

            [1] => Array
                (
                    [type] => condition
                    [tooth_id] => 63
                    [condition_code] => M
                    [box_key] => P-63-center
                    [color] => blue
                    [case_type] => temporary
                )

            [2] => Array
                (
                    [type] => condition
                    [tooth_id] => 22
                    [condition_code] => M
                    [box_key] => P-22-center
                    [color] => blue
                    [case_type] => permanent
                )

            [3] => Array
                (
                    [type] => condition
                    [tooth_id] => 23
                    [condition_code] => M
                    [box_key] => P-23-center
                    [color] => blue
                    [case_type] => temporary
                )

            [4] => Array
                (
                    [type] => condition
                    [tooth_id] => 32
                    [condition_code] => M
                    [box_key] => T-32-center
                    [color] => blue
                    [case_type] => permanent
                )

            [5] => Array
                (
                    [type] => condition
                    [tooth_id] => 33
                    [condition_code] => M
                    [box_key] => T-33-center
                    [color] => blue
                    [case_type] => temporary
                )

            [6] => Array
                (
                    [type] => condition
                    [tooth_id] => 72
                    [condition_code] => M
                    [box_key] => T-72-center
                    [color] => blue
                    [case_type] => permanent
                )

            [7] => Array
                (
                    [type] => condition
                    [tooth_id] => 73
                    [condition_code] => M
                    [box_key] => T-73-center
                    [color] => blue
                    [case_type] => temporary
                )

            [8] => Array
                (
                    [type] => treatment
                    [tooth_id] => 22
                    [treatment_code] => FG
                    [box_key] => R1-9
                    [color] => 
                    [case_type] => permanent
                )

            [9] => Array
                (
                    [type] => condition
                    [tooth_id] => 22
                    [condition_code] => M
                    [box_key] => R2-9
                    [color] => blue
                    [case_type] => permanent
                )

            [10] => Array
                (
                    [type] => condition
                    [tooth_id] => 23
                    [condition_code] => M
                    [box_key] => R2-10
                    [color] => blue
                    [case_type] => temporary
                )

            [11] => Array
                (
                    [type] => condition
                    [tooth_id] => 22
                    [condition_code] => M
                    [box_key] => R3-9
                    [color] => blue
                    [case_type] => permanent
                )

            [12] => Array
                (
                    [type] => condition
                    [tooth_id] => 23
                    [condition_code] => M
                    [box_key] => R3-10
                    [color] => blue
                    [case_type] => temporary
                )

            [13] => Array
                (
                    [type] => treatment
                    [tooth_id] => 22
                    [treatment_code] => FG
                    [box_key] => R4-9
                    [color] => 
                    [case_type] => permanent
                )

        )

)

2025-12-07 11:09:43 - Starting transaction
2025-12-07 11:09:43 - Created new visit_id: 12 for patient: 2
2025-12-07 11:09:43 - Processing item 0: Array
(
    [type] => condition
    [tooth_id] => 62
    [condition_code] => M
    [box_key] => P-62-center
    [color] => blue
    [case_type] => permanent
)

2025-12-07 11:09:43 - Resolving tooth_id for: '62'
2025-12-07 11:09:43 - Found tooth by FDI: 62 => 39
2025-12-07 11:09:43 - Item details: type=condition, tooth=39, box=P-62-center
2025-12-07 11:09:43 - Processing condition: 'M', caseType: permanent
2025-12-07 11:09:43 - Looking for condition: 'M', caseType: permanent, isPermanent: 1
2025-12-07 11:09:43 - Found condition_id: 6 for 'M' in column code
2025-12-07 11:09:43 - Inserting condition: visit_id=12, tooth_id=39, condition_id=6, box_key='P-62-center', color='blue', case_type='permanent'
2025-12-07 11:09:43 - Condition inserted successfully
2025-12-07 11:09:43 - Processing item 1: Array
(
    [type] => condition
    [tooth_id] => 63
    [condition_code] => M
    [box_key] => P-63-center
    [color] => blue
    [case_type] => temporary
)

2025-12-07 11:09:43 - Resolving tooth_id for: '63'
2025-12-07 11:09:43 - Found tooth by FDI: 63 => 40
2025-12-07 11:09:43 - Item details: type=condition, tooth=40, box=P-63-center
2025-12-07 11:09:43 - Processing condition: 'M', caseType: temporary
2025-12-07 11:09:43 - Looking for condition: 'M', caseType: temporary, isPermanent: 0
2025-12-07 11:09:43 - Found condition_id: 7 for 'M' in column code
2025-12-07 11:09:43 - Inserting condition: visit_id=12, tooth_id=40, condition_id=7, box_key='P-63-center', color='blue', case_type='temporary'
2025-12-07 11:09:43 - Condition inserted successfully
2025-12-07 11:09:43 - Processing item 2: Array
(
    [type] => condition
    [tooth_id] => 22
    [condition_code] => M
    [box_key] => P-22-center
    [color] => blue
    [case_type] => permanent
)

2025-12-07 11:09:43 - Resolving tooth_id for: '22'
2025-12-07 11:09:43 - Found tooth by tooth_id: 22 => 22
2025-12-07 11:09:43 - Item details: type=condition, tooth=22, box=P-22-center
2025-12-07 11:09:43 - Processing condition: 'M', caseType: permanent
2025-12-07 11:09:43 - Looking for condition: 'M', caseType: permanent, isPermanent: 1
2025-12-07 11:09:43 - Found condition_id: 6 for 'M' in column code
2025-12-07 11:09:43 - Inserting condition: visit_id=12, tooth_id=22, condition_id=6, box_key='P-22-center', color='blue', case_type='permanent'
2025-12-07 11:09:43 - Condition inserted successfully
2025-12-07 11:09:43 - Processing item 3: Array
(
    [type] => condition
    [tooth_id] => 23
    [condition_code] => M
    [box_key] => P-23-center
    [color] => blue
    [case_type] => temporary
)

2025-12-07 11:09:43 - Resolving tooth_id for: '23'
2025-12-07 11:09:43 - Found tooth by tooth_id: 23 => 23
2025-12-07 11:09:43 - Item details: type=condition, tooth=23, box=P-23-center
2025-12-07 11:09:43 - Processing condition: 'M', caseType: temporary
2025-12-07 11:09:43 - Looking for condition: 'M', caseType: temporary, isPermanent: 0
2025-12-07 11:09:43 - Found condition_id: 7 for 'M' in column code
2025-12-07 11:09:43 - Inserting condition: visit_id=12, tooth_id=23, condition_id=7, box_key='P-23-center', color='blue', case_type='temporary'
2025-12-07 11:09:43 - Condition inserted successfully
2025-12-07 11:09:43 - Processing item 4: Array
(
    [type] => condition
    [tooth_id] => 32
    [condition_code] => M
    [box_key] => T-32-center
    [color] => blue
    [case_type] => permanent
)

2025-12-07 11:09:43 - Resolving tooth_id for: '32'
2025-12-07 11:09:43 - Found tooth by tooth_id: 32 => 32
2025-12-07 11:09:43 - Item details: type=condition, tooth=32, box=T-32-center
2025-12-07 11:09:43 - Processing condition: 'M', caseType: permanent
2025-12-07 11:09:43 - Looking for condition: 'M', caseType: permanent, isPermanent: 1
2025-12-07 11:09:43 - Found condition_id: 6 for 'M' in column code
2025-12-07 11:09:43 - Inserting condition: visit_id=12, tooth_id=32, condition_id=6, box_key='T-32-center', color='blue', case_type='permanent'
2025-12-07 11:09:43 - Condition inserted successfully
2025-12-07 11:09:43 - Processing item 5: Array
(
    [type] => condition
    [tooth_id] => 33
    [condition_code] => M
    [box_key] => T-33-center
    [color] => blue
    [case_type] => temporary
)

2025-12-07 11:09:43 - Resolving tooth_id for: '33'
2025-12-07 11:09:43 - Found tooth by tooth_id: 33 => 33
2025-12-07 11:09:43 - Item details: type=condition, tooth=33, box=T-33-center
2025-12-07 11:09:43 - Processing condition: 'M', caseType: temporary
2025-12-07 11:09:43 - Looking for condition: 'M', caseType: temporary, isPermanent: 0
2025-12-07 11:09:43 - Found condition_id: 7 for 'M' in column code
2025-12-07 11:09:43 - Inserting condition: visit_id=12, tooth_id=33, condition_id=7, box_key='T-33-center', color='blue', case_type='temporary'
2025-12-07 11:09:43 - Condition inserted successfully
2025-12-07 11:09:43 - Processing item 6: Array
(
    [type] => condition
    [tooth_id] => 72
    [condition_code] => M
    [box_key] => T-72-center
    [color] => blue
    [case_type] => permanent
)

2025-12-07 11:09:43 - Resolving tooth_id for: '72'
2025-12-07 11:09:43 - Found tooth by FDI: 72 => 44
2025-12-07 11:09:43 - Item details: type=condition, tooth=44, box=T-72-center
2025-12-07 11:09:43 - Processing condition: 'M', caseType: permanent
2025-12-07 11:09:43 - Looking for condition: 'M', caseType: permanent, isPermanent: 1
2025-12-07 11:09:43 - Found condition_id: 6 for 'M' in column code
2025-12-07 11:09:43 - Inserting condition: visit_id=12, tooth_id=44, condition_id=6, box_key='T-72-center', color='blue', case_type='permanent'
2025-12-07 11:09:43 - Condition inserted successfully
2025-12-07 11:09:43 - Processing item 7: Array
(
    [type] => condition
    [tooth_id] => 73
    [condition_code] => M
    [box_key] => T-73-center
    [color] => blue
    [case_type] => temporary
)

2025-12-07 11:09:43 - Resolving tooth_id for: '73'
2025-12-07 11:09:43 - Found tooth by FDI: 73 => 45
2025-12-07 11:09:43 - Item details: type=condition, tooth=45, box=T-73-center
2025-12-07 11:09:43 - Processing condition: 'M', caseType: temporary
2025-12-07 11:09:43 - Looking for condition: 'M', caseType: temporary, isPermanent: 0
2025-12-07 11:09:43 - Found condition_id: 7 for 'M' in column code
2025-12-07 11:09:43 - Inserting condition: visit_id=12, tooth_id=45, condition_id=7, box_key='T-73-center', color='blue', case_type='temporary'
2025-12-07 11:09:43 - Condition inserted successfully
2025-12-07 11:09:43 - Processing item 8: Array
(
    [type] => treatment
    [tooth_id] => 22
    [treatment_code] => FG
    [box_key] => R1-9
    [color] => 
    [case_type] => permanent
)

2025-12-07 11:09:43 - Resolving tooth_id for: '22'
2025-12-07 11:09:43 - Found tooth by tooth_id: 22 => 22
2025-12-07 11:09:43 - Item details: type=treatment, tooth=22, box=R1-9
2025-12-07 11:09:43 - Processing treatment: 'FG'
2025-12-07 11:09:43 - Looking for treatment: 'FG'
2025-12-07 11:09:43 - Found treatment_id: 9 for 'FG'
2025-12-07 11:09:43 - Inserting treatment: visit_id=12, tooth_id=22, treatment_id=9, box_key='R1-9', color='', case_type='permanent'
2025-12-07 11:09:43 - Treatment inserted successfully
2025-12-07 11:09:43 - Processing item 9: Array
(
    [type] => condition
    [tooth_id] => 22
    [condition_code] => M
    [box_key] => R2-9
    [color] => blue
    [case_type] => permanent
)

2025-12-07 11:09:43 - Resolving tooth_id for: '22'
2025-12-07 11:09:43 - Found tooth by tooth_id: 22 => 22
2025-12-07 11:09:43 - Item details: type=condition, tooth=22, box=R2-9
2025-12-07 11:09:43 - Processing condition: 'M', caseType: permanent
2025-12-07 11:09:43 - Looking for condition: 'M', caseType: permanent, isPermanent: 1
2025-12-07 11:09:43 - Found condition_id: 6 for 'M' in column code
2025-12-07 11:09:43 - Inserting condition: visit_id=12, tooth_id=22, condition_id=6, box_key='R2-9', color='blue', case_type='permanent'
2025-12-07 11:09:43 - Condition inserted successfully
2025-12-07 11:09:43 - Processing item 10: Array
(
    [type] => condition
    [tooth_id] => 23
    [condition_code] => M
    [box_key] => R2-10
    [color] => blue
    [case_type] => temporary
)

2025-12-07 11:09:43 - Resolving tooth_id for: '23'
2025-12-07 11:09:43 - Found tooth by tooth_id: 23 => 23
2025-12-07 11:09:43 - Item details: type=condition, tooth=23, box=R2-10
2025-12-07 11:09:43 - Processing condition: 'M', caseType: temporary
2025-12-07 11:09:43 - Looking for condition: 'M', caseType: temporary, isPermanent: 0
2025-12-07 11:09:43 - Found condition_id: 7 for 'M' in column code
2025-12-07 11:09:43 - Inserting condition: visit_id=12, tooth_id=23, condition_id=7, box_key='R2-10', color='blue', case_type='temporary'
2025-12-07 11:09:43 - Condition inserted successfully
2025-12-07 11:09:43 - Processing item 11: Array
(
    [type] => condition
    [tooth_id] => 22
    [condition_code] => M
    [box_key] => R3-9
    [color] => blue
    [case_type] => permanent
)

2025-12-07 11:09:43 - Resolving tooth_id for: '22'
2025-12-07 11:09:43 - Found tooth by tooth_id: 22 => 22
2025-12-07 11:09:43 - Item details: type=condition, tooth=22, box=R3-9
2025-12-07 11:09:43 - Processing condition: 'M', caseType: permanent
2025-12-07 11:09:43 - Looking for condition: 'M', caseType: permanent, isPermanent: 1
2025-12-07 11:09:43 - Found condition_id: 6 for 'M' in column code
2025-12-07 11:09:43 - Inserting condition: visit_id=12, tooth_id=22, condition_id=6, box_key='R3-9', color='blue', case_type='permanent'
2025-12-07 11:09:43 - Condition inserted successfully
2025-12-07 11:09:43 - Processing item 12: Array
(
    [type] => condition
    [tooth_id] => 23
    [condition_code] => M
    [box_key] => R3-10
    [color] => blue
    [case_type] => temporary
)

2025-12-07 11:09:43 - Resolving tooth_id for: '23'
2025-12-07 11:09:43 - Found tooth by tooth_id: 23 => 23
2025-12-07 11:09:43 - Item details: type=condition, tooth=23, box=R3-10
2025-12-07 11:09:43 - Processing condition: 'M', caseType: temporary
2025-12-07 11:09:43 - Looking for condition: 'M', caseType: temporary, isPermanent: 0
2025-12-07 11:09:43 - Found condition_id: 7 for 'M' in column code
2025-12-07 11:09:43 - Inserting condition: visit_id=12, tooth_id=23, condition_id=7, box_key='R3-10', color='blue', case_type='temporary'
2025-12-07 11:09:43 - Condition inserted successfully
2025-12-07 11:09:43 - Processing item 13: Array
(
    [type] => treatment
    [tooth_id] => 22
    [treatment_code] => FG
    [box_key] => R4-9
    [color] => 
    [case_type] => permanent
)

2025-12-07 11:09:43 - Resolving tooth_id for: '22'
2025-12-07 11:09:43 - Found tooth by tooth_id: 22 => 22
2025-12-07 11:09:43 - Item details: type=treatment, tooth=22, box=R4-9
2025-12-07 11:09:43 - Processing treatment: 'FG'
2025-12-07 11:09:43 - Looking for treatment: 'FG'
2025-12-07 11:09:43 - Found treatment_id: 9 for 'FG'
2025-12-07 11:09:43 - Inserting treatment: visit_id=12, tooth_id=22, treatment_id=9, box_key='R4-9', color='', case_type='permanent'
2025-12-07 11:09:43 - Treatment inserted successfully
2025-12-07 11:09:43 - Transaction committed successfully. Inserted: 14 items
2025-12-07 11:09:43 - Sending response: {"success":true,"visit_id":"12","inserted":14,"warnings":[]}
2025-12-07 14:02:42 - Received save request: {"action":"save","patient_id":"2","visit_id":"0","oral_data":[{"type":"condition","tooth_id":"53","condition_code":"DX","box_key":"P-53-center","color":"blue","case_type":"permanent"},{"type":"condition","tooth_id":"13","condition_code":"DX","box_key":"P-13-center","color":"blue","case_type":"permanent"},{"type":"condition","tooth_id":"43","condition_code":"DX","box_key":"T-43-center","color":"blue","case_type":"permanent"},{"type":"condition","tooth_id":"83","condition_code":"DX","box_key":"T-83-center","color":"blue","case_type":"permanent"},{"type":"treatment","tooth_id":"13","treatment_code":"FG","box_key":"R1-5","color":"","case_type":"permanent"},{"type":"condition","tooth_id":"13","condition_code":"DX","box_key":"R2-5","color":"blue","case_type":"permanent"},{"type":"condition","tooth_id":"13","condition_code":"DX","box_key":"R3-5","color":"blue","case_type":"permanent"},{"type":"treatment","tooth_id":"13","treatment_code":"FG","box_key":"R4-5","color":"","case_type":"permanent"}]}
2025-12-07 14:02:42 - Parsed input: Array
(
    [action] => save
    [patient_id] => 2
    [visit_id] => 0
    [oral_data] => Array
        (
            [0] => Array
                (
                    [type] => condition
                    [tooth_id] => 53
                    [condition_code] => DX
                    [box_key] => P-53-center
                    [color] => blue
                    [case_type] => permanent
                )

            [1] => Array
                (
                    [type] => condition
                    [tooth_id] => 13
                    [condition_code] => DX
                    [box_key] => P-13-center
                    [color] => blue
                    [case_type] => permanent
                )

            [2] => Array
                (
                    [type] => condition
                    [tooth_id] => 43
                    [condition_code] => DX
                    [box_key] => T-43-center
                    [color] => blue
                    [case_type] => permanent
                )

            [3] => Array
                (
                    [type] => condition
                    [tooth_id] => 83
                    [condition_code] => DX
                    [box_key] => T-83-center
                    [color] => blue
                    [case_type] => permanent
                )

            [4] => Array
                (
                    [type] => treatment
                    [tooth_id] => 13
                    [treatment_code] => FG
                    [box_key] => R1-5
                    [color] => 
                    [case_type] => permanent
                )

            [5] => Array
                (
                    [type] => condition
                    [tooth_id] => 13
                    [condition_code] => DX
                    [box_key] => R2-5
                    [color] => blue
                    [case_type] => permanent
                )

            [6] => Array
                (
                    [type] => condition
                    [tooth_id] => 13
                    [condition_code] => DX
                    [box_key] => R3-5
                    [color] => blue
                    [case_type] => permanent
                )

            [7] => Array
                (
                    [type] => treatment
                    [tooth_id] => 13
                    [treatment_code] => FG
                    [box_key] => R4-5
                    [color] => 
                    [case_type] => permanent
                )

        )

)

2025-12-07 14:02:42 - Starting transaction
2025-12-07 14:02:42 - Created new visit_id: 13 for patient: 2
2025-12-07 14:02:42 - Processing item 0: Array
(
    [type] => condition
    [tooth_id] => 53
    [condition_code] => DX
    [box_key] => P-53-center
    [color] => blue
    [case_type] => permanent
)

2025-12-07 14:02:42 - Resolving tooth_id for: '53'
2025-12-07 14:02:42 - Found tooth by FDI: 53 => 35
2025-12-07 14:02:42 - Item details: type=condition, tooth=35, box=P-53-center
2025-12-07 14:02:42 - Processing condition: 'DX', caseType: permanent
2025-12-07 14:02:42 - Looking for condition: 'DX', caseType: permanent, isPermanent: 1
2025-12-07 14:02:42 - Found condition_id: 8 for 'DX' in column code
2025-12-07 14:02:42 - Inserting condition: visit_id=13, tooth_id=35, condition_id=8, box_key='P-53-center', color='blue', case_type='permanent'
2025-12-07 14:02:42 - Condition inserted successfully
2025-12-07 14:02:42 - Processing item 1: Array
(
    [type] => condition
    [tooth_id] => 13
    [condition_code] => DX
    [box_key] => P-13-center
    [color] => blue
    [case_type] => permanent
)

2025-12-07 14:02:42 - Resolving tooth_id for: '13'
2025-12-07 14:02:42 - Found tooth by tooth_id: 13 => 13
2025-12-07 14:02:42 - Item details: type=condition, tooth=13, box=P-13-center
2025-12-07 14:02:42 - Processing condition: 'DX', caseType: permanent
2025-12-07 14:02:42 - Looking for condition: 'DX', caseType: permanent, isPermanent: 1
2025-12-07 14:02:42 - Found condition_id: 8 for 'DX' in column code
2025-12-07 14:02:42 - Inserting condition: visit_id=13, tooth_id=13, condition_id=8, box_key='P-13-center', color='blue', case_type='permanent'
2025-12-07 14:02:42 - Condition inserted successfully
2025-12-07 14:02:42 - Processing item 2: Array
(
    [type] => condition
    [tooth_id] => 43
    [condition_code] => DX
    [box_key] => T-43-center
    [color] => blue
    [case_type] => permanent
)

2025-12-07 14:02:42 - Resolving tooth_id for: '43'
2025-12-07 14:02:42 - Found tooth by tooth_id: 43 => 43
2025-12-07 14:02:42 - Item details: type=condition, tooth=43, box=T-43-center
2025-12-07 14:02:42 - Processing condition: 'DX', caseType: permanent
2025-12-07 14:02:42 - Looking for condition: 'DX', caseType: permanent, isPermanent: 1
2025-12-07 14:02:42 - Found condition_id: 8 for 'DX' in column code
2025-12-07 14:02:42 - Inserting condition: visit_id=13, tooth_id=43, condition_id=8, box_key='T-43-center', color='blue', case_type='permanent'
2025-12-07 14:02:42 - Condition inserted successfully
2025-12-07 14:02:42 - Processing item 3: Array
(
    [type] => condition
    [tooth_id] => 83
    [condition_code] => DX
    [box_key] => T-83-center
    [color] => blue
    [case_type] => permanent
)

2025-12-07 14:02:42 - Resolving tooth_id for: '83'
2025-12-07 14:02:42 - Found tooth by FDI: 83 => 50
2025-12-07 14:02:42 - Item details: type=condition, tooth=50, box=T-83-center
2025-12-07 14:02:42 - Processing condition: 'DX', caseType: permanent
2025-12-07 14:02:42 - Looking for condition: 'DX', caseType: permanent, isPermanent: 1
2025-12-07 14:02:42 - Found condition_id: 8 for 'DX' in column code
2025-12-07 14:02:42 - Inserting condition: visit_id=13, tooth_id=50, condition_id=8, box_key='T-83-center', color='blue', case_type='permanent'
2025-12-07 14:02:42 - Condition inserted successfully
2025-12-07 14:02:42 - Processing item 4: Array
(
    [type] => treatment
    [tooth_id] => 13
    [treatment_code] => FG
    [box_key] => R1-5
    [color] => 
    [case_type] => permanent
)

2025-12-07 14:02:42 - Resolving tooth_id for: '13'
2025-12-07 14:02:42 - Found tooth by tooth_id: 13 => 13
2025-12-07 14:02:42 - Item details: type=treatment, tooth=13, box=R1-5
2025-12-07 14:02:42 - Processing treatment: 'FG'
2025-12-07 14:02:42 - Looking for treatment: 'FG'
2025-12-07 14:02:42 - Found treatment_id: 9 for 'FG'
2025-12-07 14:02:42 - Inserting treatment: visit_id=13, tooth_id=13, treatment_id=9, box_key='R1-5', color='', case_type='permanent'
2025-12-07 14:02:42 - Treatment inserted successfully
2025-12-07 14:02:42 - Processing item 5: Array
(
    [type] => condition
    [tooth_id] => 13
    [condition_code] => DX
    [box_key] => R2-5
    [color] => blue
    [case_type] => permanent
)

2025-12-07 14:02:42 - Resolving tooth_id for: '13'
2025-12-07 14:02:42 - Found tooth by tooth_id: 13 => 13
2025-12-07 14:02:42 - Item details: type=condition, tooth=13, box=R2-5
2025-12-07 14:02:42 - Processing condition: 'DX', caseType: permanent
2025-12-07 14:02:42 - Looking for condition: 'DX', caseType: permanent, isPermanent: 1
2025-12-07 14:02:42 - Found condition_id: 8 for 'DX' in column code
2025-12-07 14:02:42 - Inserting condition: visit_id=13, tooth_id=13, condition_id=8, box_key='R2-5', color='blue', case_type='permanent'
2025-12-07 14:02:42 - Condition inserted successfully
2025-12-07 14:02:42 - Processing item 6: Array
(
    [type] => condition
    [tooth_id] => 13
    [condition_code] => DX
    [box_key] => R3-5
    [color] => blue
    [case_type] => permanent
)

2025-12-07 14:02:42 - Resolving tooth_id for: '13'
2025-12-07 14:02:42 - Found tooth by tooth_id: 13 => 13
2025-12-07 14:02:42 - Item details: type=condition, tooth=13, box=R3-5
2025-12-07 14:02:42 - Processing condition: 'DX', caseType: permanent
2025-12-07 14:02:42 - Looking for condition: 'DX', caseType: permanent, isPermanent: 1
2025-12-07 14:02:42 - Found condition_id: 8 for 'DX' in column code
2025-12-07 14:02:42 - Inserting condition: visit_id=13, tooth_id=13, condition_id=8, box_key='R3-5', color='blue', case_type='permanent'
2025-12-07 14:02:42 - Condition inserted successfully
2025-12-07 14:02:42 - Processing item 7: Array
(
    [type] => treatment
    [tooth_id] => 13
    [treatment_code] => FG
    [box_key] => R4-5
    [color] => 
    [case_type] => permanent
)

2025-12-07 14:02:42 - Resolving tooth_id for: '13'
2025-12-07 14:02:42 - Found tooth by tooth_id: 13 => 13
2025-12-07 14:02:42 - Item details: type=treatment, tooth=13, box=R4-5
2025-12-07 14:02:42 - Processing treatment: 'FG'
2025-12-07 14:02:42 - Looking for treatment: 'FG'
2025-12-07 14:02:42 - Found treatment_id: 9 for 'FG'
2025-12-07 14:02:42 - Inserting treatment: visit_id=13, tooth_id=13, treatment_id=9, box_key='R4-5', color='', case_type='permanent'
2025-12-07 14:02:42 - Treatment inserted successfully
2025-12-07 14:02:42 - Transaction committed successfully. Inserted: 8 items
2025-12-07 14:02:42 - Sending response: {"success":true,"visit_id":"13","inserted":8,"warnings":[]}
2025-12-07 15:01:00 - Received save request: {"action":"save","patient_id":"2","visit_id":"0","oral_data":[{"type":"condition","tooth_id":"18","condition_code":"S","box_key":"P-18-center","color":"red","case_type":"permanent"},{"type":"condition","tooth_id":"17","condition_code":"S","box_key":"P-17-bottom-right","color":"red","case_type":"temporary"},{"type":"condition","tooth_id":"17","condition_code":"S","box_key":"P-17-center","color":"red","case_type":"temporary"},{"type":"condition","tooth_id":"48","condition_code":"S","box_key":"T-48-center","color":"red","case_type":"permanent"},{"type":"condition","tooth_id":"47","condition_code":"S","box_key":"T-47-center","color":"red","case_type":"temporary"},{"type":"treatment","tooth_id":"18","treatment_code":"O","box_key":"R1-0","color":"","case_type":"permanent"},{"type":"condition","tooth_id":"18","condition_code":"S","box_key":"R2-0","color":"red","case_type":"permanent"},{"type":"condition","tooth_id":"17","condition_code":"S","box_key":"R2-1","color":"red","case_type":"temporary"},{"type":"condition","tooth_id":"18","condition_code":"S","box_key":"R3-0","color":"red","case_type":"permanent"},{"type":"condition","tooth_id":"17","condition_code":"S","box_key":"R3-1","color":"red","case_type":"temporary"},{"type":"treatment","tooth_id":"18","treatment_code":"O","box_key":"R4-0","color":"","case_type":"permanent"}]}
2025-12-07 15:01:00 - Parsed input: Array
(
    [action] => save
    [patient_id] => 2
    [visit_id] => 0
    [oral_data] => Array
        (
            [0] => Array
                (
                    [type] => condition
                    [tooth_id] => 18
                    [condition_code] => S
                    [box_key] => P-18-center
                    [color] => red
                    [case_type] => permanent
                )

            [1] => Array
                (
                    [type] => condition
                    [tooth_id] => 17
                    [condition_code] => S
                    [box_key] => P-17-bottom-right
                    [color] => red
                    [case_type] => temporary
                )

            [2] => Array
                (
                    [type] => condition
                    [tooth_id] => 17
                    [condition_code] => S
                    [box_key] => P-17-center
                    [color] => red
                    [case_type] => temporary
                )

            [3] => Array
                (
                    [type] => condition
                    [tooth_id] => 48
                    [condition_code] => S
                    [box_key] => T-48-center
                    [color] => red
                    [case_type] => permanent
                )

            [4] => Array
                (
                    [type] => condition
                    [tooth_id] => 47
                    [condition_code] => S
                    [box_key] => T-47-center
                    [color] => red
                    [case_type] => temporary
                )

            [5] => Array
                (
                    [type] => treatment
                    [tooth_id] => 18
                    [treatment_code] => O
                    [box_key] => R1-0
                    [color] => 
                    [case_type] => permanent
                )

            [6] => Array
                (
                    [type] => condition
                    [tooth_id] => 18
                    [condition_code] => S
                    [box_key] => R2-0
                    [color] => red
                    [case_type] => permanent
                )

            [7] => Array
                (
                    [type] => condition
                    [tooth_id] => 17
                    [condition_code] => S
                    [box_key] => R2-1
                    [color] => red
                    [case_type] => temporary
                )

            [8] => Array
                (
                    [type] => condition
                    [tooth_id] => 18
                    [condition_code] => S
                    [box_key] => R3-0
                    [color] => red
                    [case_type] => permanent
                )

            [9] => Array
                (
                    [type] => condition
                    [tooth_id] => 17
                    [condition_code] => S
                    [box_key] => R3-1
                    [color] => red
                    [case_type] => temporary
                )

            [10] => Array
                (
                    [type] => treatment
                    [tooth_id] => 18
                    [treatment_code] => O
                    [box_key] => R4-0
                    [color] => 
                    [case_type] => permanent
                )

        )

)

2025-12-07 15:01:00 - Starting transaction
2025-12-07 15:01:00 - Created new visit_id: 14 for patient: 2
2025-12-07 15:01:00 - Processing item 0: Array
(
    [type] => condition
    [tooth_id] => 18
    [condition_code] => S
    [box_key] => P-18-center
    [color] => red
    [case_type] => permanent
)

2025-12-07 15:01:00 - Resolving tooth_id for: '18'
2025-12-07 15:01:00 - Found tooth by tooth_id: 18 => 18
2025-12-07 15:01:00 - Item details: type=condition, tooth=18, box=P-18-center
2025-12-07 15:01:00 - Processing condition: 'S', caseType: permanent
2025-12-07 15:01:00 - Looking for condition: 'S', caseType: permanent, isPermanent: 1
2025-12-07 15:01:00 - Found condition_id: 12 for 'S' in column code
2025-12-07 15:01:00 - Inserting condition: visit_id=14, tooth_id=18, condition_id=12, box_key='P-18-center', color='red', case_type='permanent'
2025-12-07 15:01:00 - Condition inserted successfully
2025-12-07 15:01:00 - Processing item 1: Array
(
    [type] => condition
    [tooth_id] => 17
    [condition_code] => S
    [box_key] => P-17-bottom-right
    [color] => red
    [case_type] => temporary
)

2025-12-07 15:01:00 - Resolving tooth_id for: '17'
2025-12-07 15:01:00 - Found tooth by tooth_id: 17 => 17
2025-12-07 15:01:00 - Item details: type=condition, tooth=17, box=P-17-bottom-right
2025-12-07 15:01:00 - Processing condition: 'S', caseType: temporary
2025-12-07 15:01:00 - Looking for condition: 'S', caseType: temporary, isPermanent: 0
2025-12-07 15:01:00 - Found condition_id: 13 for 'S' in column code
2025-12-07 15:01:00 - Inserting condition: visit_id=14, tooth_id=17, condition_id=13, box_key='P-17-bottom-right', color='red', case_type='temporary'
2025-12-07 15:01:00 - Condition inserted successfully
2025-12-07 15:01:00 - Processing item 2: Array
(
    [type] => condition
    [tooth_id] => 17
    [condition_code] => S
    [box_key] => P-17-center
    [color] => red
    [case_type] => temporary
)

2025-12-07 15:01:00 - Resolving tooth_id for: '17'
2025-12-07 15:01:00 - Found tooth by tooth_id: 17 => 17
2025-12-07 15:01:00 - Item details: type=condition, tooth=17, box=P-17-center
2025-12-07 15:01:00 - Processing condition: 'S', caseType: temporary
2025-12-07 15:01:00 - Looking for condition: 'S', caseType: temporary, isPermanent: 0
2025-12-07 15:01:00 - Found condition_id: 13 for 'S' in column code
2025-12-07 15:01:00 - Inserting condition: visit_id=14, tooth_id=17, condition_id=13, box_key='P-17-center', color='red', case_type='temporary'
2025-12-07 15:01:00 - Condition inserted successfully
2025-12-07 15:01:00 - Processing item 3: Array
(
    [type] => condition
    [tooth_id] => 48
    [condition_code] => S
    [box_key] => T-48-center
    [color] => red
    [case_type] => permanent
)

2025-12-07 15:01:00 - Resolving tooth_id for: '48'
2025-12-07 15:01:00 - Found tooth by tooth_id: 48 => 48
2025-12-07 15:01:00 - Item details: type=condition, tooth=48, box=T-48-center
2025-12-07 15:01:00 - Processing condition: 'S', caseType: permanent
2025-12-07 15:01:00 - Looking for condition: 'S', caseType: permanent, isPermanent: 1
2025-12-07 15:01:00 - Found condition_id: 12 for 'S' in column code
2025-12-07 15:01:00 - Inserting condition: visit_id=14, tooth_id=48, condition_id=12, box_key='T-48-center', color='red', case_type='permanent'
2025-12-07 15:01:00 - Condition inserted successfully
2025-12-07 15:01:00 - Processing item 4: Array
(
    [type] => condition
    [tooth_id] => 47
    [condition_code] => S
    [box_key] => T-47-center
    [color] => red
    [case_type] => temporary
)

2025-12-07 15:01:00 - Resolving tooth_id for: '47'
2025-12-07 15:01:00 - Found tooth by tooth_id: 47 => 47
2025-12-07 15:01:00 - Item details: type=condition, tooth=47, box=T-47-center
2025-12-07 15:01:00 - Processing condition: 'S', caseType: temporary
2025-12-07 15:01:00 - Looking for condition: 'S', caseType: temporary, isPermanent: 0
2025-12-07 15:01:00 - Found condition_id: 13 for 'S' in column code
2025-12-07 15:01:00 - Inserting condition: visit_id=14, tooth_id=47, condition_id=13, box_key='T-47-center', color='red', case_type='temporary'
2025-12-07 15:01:00 - Condition inserted successfully
2025-12-07 15:01:00 - Processing item 5: Array
(
    [type] => treatment
    [tooth_id] => 18
    [treatment_code] => O
    [box_key] => R1-0
    [color] => 
    [case_type] => permanent
)

2025-12-07 15:01:00 - Resolving tooth_id for: '18'
2025-12-07 15:01:00 - Found tooth by tooth_id: 18 => 18
2025-12-07 15:01:00 - Item details: type=treatment, tooth=18, box=R1-0
2025-12-07 15:01:00 - Processing treatment: 'O'
2025-12-07 15:01:00 - Looking for treatment: 'O'
2025-12-07 15:01:00 - Found treatment_id: 14 for 'O'
2025-12-07 15:01:00 - Inserting treatment: visit_id=14, tooth_id=18, treatment_id=14, box_key='R1-0', color='', case_type='permanent'
2025-12-07 15:01:00 - Treatment inserted successfully
2025-12-07 15:01:00 - Processing item 6: Array
(
    [type] => condition
    [tooth_id] => 18
    [condition_code] => S
    [box_key] => R2-0
    [color] => red
    [case_type] => permanent
)

2025-12-07 15:01:00 - Resolving tooth_id for: '18'
2025-12-07 15:01:00 - Found tooth by tooth_id: 18 => 18
2025-12-07 15:01:00 - Item details: type=condition, tooth=18, box=R2-0
2025-12-07 15:01:00 - Processing condition: 'S', caseType: permanent
2025-12-07 15:01:00 - Looking for condition: 'S', caseType: permanent, isPermanent: 1
2025-12-07 15:01:00 - Found condition_id: 12 for 'S' in column code
2025-12-07 15:01:00 - Inserting condition: visit_id=14, tooth_id=18, condition_id=12, box_key='R2-0', color='red', case_type='permanent'
2025-12-07 15:01:00 - Condition inserted successfully
2025-12-07 15:01:00 - Processing item 7: Array
(
    [type] => condition
    [tooth_id] => 17
    [condition_code] => S
    [box_key] => R2-1
    [color] => red
    [case_type] => temporary
)

2025-12-07 15:01:00 - Resolving tooth_id for: '17'
2025-12-07 15:01:00 - Found tooth by tooth_id: 17 => 17
2025-12-07 15:01:00 - Item details: type=condition, tooth=17, box=R2-1
2025-12-07 15:01:00 - Processing condition: 'S', caseType: temporary
2025-12-07 15:01:00 - Looking for condition: 'S', caseType: temporary, isPermanent: 0
2025-12-07 15:01:00 - Found condition_id: 13 for 'S' in column code
2025-12-07 15:01:00 - Inserting condition: visit_id=14, tooth_id=17, condition_id=13, box_key='R2-1', color='red', case_type='temporary'
2025-12-07 15:01:00 - Condition inserted successfully
2025-12-07 15:01:00 - Processing item 8: Array
(
    [type] => condition
    [tooth_id] => 18
    [condition_code] => S
    [box_key] => R3-0
    [color] => red
    [case_type] => permanent
)

2025-12-07 15:01:00 - Resolving tooth_id for: '18'
2025-12-07 15:01:00 - Found tooth by tooth_id: 18 => 18
2025-12-07 15:01:00 - Item details: type=condition, tooth=18, box=R3-0
2025-12-07 15:01:00 - Processing condition: 'S', caseType: permanent
2025-12-07 15:01:00 - Looking for condition: 'S', caseType: permanent, isPermanent: 1
2025-12-07 15:01:00 - Found condition_id: 12 for 'S' in column code
2025-12-07 15:01:00 - Inserting condition: visit_id=14, tooth_id=18, condition_id=12, box_key='R3-0', color='red', case_type='permanent'
2025-12-07 15:01:00 - Condition inserted successfully
2025-12-07 15:01:00 - Processing item 9: Array
(
    [type] => condition
    [tooth_id] => 17
    [condition_code] => S
    [box_key] => R3-1
    [color] => red
    [case_type] => temporary
)

2025-12-07 15:01:00 - Resolving tooth_id for: '17'
2025-12-07 15:01:00 - Found tooth by tooth_id: 17 => 17
2025-12-07 15:01:00 - Item details: type=condition, tooth=17, box=R3-1
2025-12-07 15:01:00 - Processing condition: 'S', caseType: temporary
2025-12-07 15:01:00 - Looking for condition: 'S', caseType: temporary, isPermanent: 0
2025-12-07 15:01:00 - Found condition_id: 13 for 'S' in column code
2025-12-07 15:01:00 - Inserting condition: visit_id=14, tooth_id=17, condition_id=13, box_key='R3-1', color='red', case_type='temporary'
2025-12-07 15:01:00 - Condition inserted successfully
2025-12-07 15:01:00 - Processing item 10: Array
(
    [type] => treatment
    [tooth_id] => 18
    [treatment_code] => O
    [box_key] => R4-0
    [color] => 
    [case_type] => permanent
)

2025-12-07 15:01:00 - Resolving tooth_id for: '18'
2025-12-07 15:01:00 - Found tooth by tooth_id: 18 => 18
2025-12-07 15:01:00 - Item details: type=treatment, tooth=18, box=R4-0
2025-12-07 15:01:00 - Processing treatment: 'O'
2025-12-07 15:01:00 - Looking for treatment: 'O'
2025-12-07 15:01:00 - Found treatment_id: 14 for 'O'
2025-12-07 15:01:00 - Inserting treatment: visit_id=14, tooth_id=18, treatment_id=14, box_key='R4-0', color='', case_type='permanent'
2025-12-07 15:01:00 - Treatment inserted successfully
2025-12-07 15:01:00 - Transaction committed successfully. Inserted: 11 items
2025-12-07 15:01:00 - Sending response: {"success":true,"visit_id":"14","inserted":11,"warnings":[]}
2025-12-08 06:17:04 - Received save request: {"action":"save","patient_id":"1","visit_id":"0","oral_data":[{"type":"condition","tooth_id":"17","condition_code":"Un","box_key":"P-17-center","color":"blue","case_type":"permanent"},{"type":"condition","tooth_id":"16","condition_code":"Un","box_key":"P-16-center","color":"red","case_type":"temporary"},{"type":"condition","tooth_id":"48","condition_code":"Un","box_key":"T-48-center","color":"blue","case_type":"permanent"},{"type":"condition","tooth_id":"47","condition_code":"Un","box_key":"T-47-center","color":"red","case_type":"temporary"},{"type":"treatment","tooth_id":"18","treatment_code":"TF","box_key":"R1-0","color":"","case_type":"permanent"},{"type":"treatment","tooth_id":"21","treatment_code":"TF","box_key":"R1-8","color":"","case_type":"permanent"},{"type":"condition","tooth_id":"18","condition_code":"Un","box_key":"R2-0","color":"blue","case_type":"permanent"},{"type":"condition","tooth_id":"17","condition_code":"Un","box_key":"R2-1","color":"red","case_type":"temporary"},{"type":"condition","tooth_id":"17","condition_code":"Un","box_key":"R3-1","color":"blue","case_type":"permanent"},{"type":"condition","tooth_id":"16","condition_code":"Un","box_key":"R3-2","color":"red","case_type":"temporary"},{"type":"treatment","tooth_id":"18","treatment_code":"TF","box_key":"R4-0","color":"","case_type":"permanent"},{"type":"treatment","tooth_id":"13","treatment_code":"TF","box_key":"R4-5","color":"","case_type":"permanent"}]}
2025-12-08 06:17:04 - Parsed input: Array
(
    [action] => save
    [patient_id] => 1
    [visit_id] => 0
    [oral_data] => Array
        (
            [0] => Array
                (
                    [type] => condition
                    [tooth_id] => 17
                    [condition_code] => Un
                    [box_key] => P-17-center
                    [color] => blue
                    [case_type] => permanent
                )

            [1] => Array
                (
                    [type] => condition
                    [tooth_id] => 16
                    [condition_code] => Un
                    [box_key] => P-16-center
                    [color] => red
                    [case_type] => temporary
                )

            [2] => Array
                (
                    [type] => condition
                    [tooth_id] => 48
                    [condition_code] => Un
                    [box_key] => T-48-center
                    [color] => blue
                    [case_type] => permanent
                )

            [3] => Array
                (
                    [type] => condition
                    [tooth_id] => 47
                    [condition_code] => Un
                    [box_key] => T-47-center
                    [color] => red
                    [case_type] => temporary
                )

            [4] => Array
                (
                    [type] => treatment
                    [tooth_id] => 18
                    [treatment_code] => TF
                    [box_key] => R1-0
                    [color] => 
                    [case_type] => permanent
                )

            [5] => Array
                (
                    [type] => treatment
                    [tooth_id] => 21
                    [treatment_code] => TF
                    [box_key] => R1-8
                    [color] => 
                    [case_type] => permanent
                )

            [6] => Array
                (
                    [type] => condition
                    [tooth_id] => 18
                    [condition_code] => Un
                    [box_key] => R2-0
                    [color] => blue
                    [case_type] => permanent
                )

            [7] => Array
                (
                    [type] => condition
                    [tooth_id] => 17
                    [condition_code] => Un
                    [box_key] => R2-1
                    [color] => red
                    [case_type] => temporary
                )

            [8] => Array
                (
                    [type] => condition
                    [tooth_id] => 17
                    [condition_code] => Un
                    [box_key] => R3-1
                    [color] => blue
                    [case_type] => permanent
                )

            [9] => Array
                (
                    [type] => condition
                    [tooth_id] => 16
                    [condition_code] => Un
                    [box_key] => R3-2
                    [color] => red
                    [case_type] => temporary
                )

            [10] => Array
                (
                    [type] => treatment
                    [tooth_id] => 18
                    [treatment_code] => TF
                    [box_key] => R4-0
                    [color] => 
                    [case_type] => permanent
                )

            [11] => Array
                (
                    [type] => treatment
                    [tooth_id] => 13
                    [treatment_code] => TF
                    [box_key] => R4-5
                    [color] => 
                    [case_type] => permanent
                )

        )

)

2025-12-08 06:17:04 - Starting transaction
2025-12-08 06:17:04 - Created new visit_id: 15 for patient: 1
2025-12-08 06:17:04 - Processing item 0: Array
(
    [type] => condition
    [tooth_id] => 17
    [condition_code] => Un
    [box_key] => P-17-center
    [color] => blue
    [case_type] => permanent
)

2025-12-08 06:17:04 - Resolving tooth_id for: '17'
2025-12-08 06:17:04 - Found tooth by tooth_id: 17 => 17
2025-12-08 06:17:04 - Item details: type=condition, tooth=17, box=P-17-center
2025-12-08 06:17:04 - Processing condition: 'Un', caseType: permanent
2025-12-08 06:17:04 - Looking for condition: 'Un', caseType: permanent, isPermanent: 1
2025-12-08 06:17:04 - Found condition_id: 10 for 'Un' in column code
2025-12-08 06:17:04 - Inserting condition: visit_id=15, tooth_id=17, condition_id=10, box_key='P-17-center', color='blue', case_type='permanent'
2025-12-08 06:17:04 - Condition inserted successfully
2025-12-08 06:17:04 - Processing item 1: Array
(
    [type] => condition
    [tooth_id] => 16
    [condition_code] => Un
    [box_key] => P-16-center
    [color] => red
    [case_type] => temporary
)

2025-12-08 06:17:04 - Resolving tooth_id for: '16'
2025-12-08 06:17:04 - Found tooth by tooth_id: 16 => 16
2025-12-08 06:17:04 - Item details: type=condition, tooth=16, box=P-16-center
2025-12-08 06:17:04 - Processing condition: 'Un', caseType: temporary
2025-12-08 06:17:04 - Looking for condition: 'Un', caseType: temporary, isPermanent: 0
2025-12-08 06:17:04 - Found condition_id: 11 for 'Un' in column code
2025-12-08 06:17:04 - Inserting condition: visit_id=15, tooth_id=16, condition_id=11, box_key='P-16-center', color='red', case_type='temporary'
2025-12-08 06:17:04 - Condition inserted successfully
2025-12-08 06:17:04 - Processing item 2: Array
(
    [type] => condition
    [tooth_id] => 48
    [condition_code] => Un
    [box_key] => T-48-center
    [color] => blue
    [case_type] => permanent
)

2025-12-08 06:17:04 - Resolving tooth_id for: '48'
2025-12-08 06:17:04 - Found tooth by tooth_id: 48 => 48
2025-12-08 06:17:04 - Item details: type=condition, tooth=48, box=T-48-center
2025-12-08 06:17:04 - Processing condition: 'Un', caseType: permanent
2025-12-08 06:17:04 - Looking for condition: 'Un', caseType: permanent, isPermanent: 1
2025-12-08 06:17:04 - Found condition_id: 10 for 'Un' in column code
2025-12-08 06:17:04 - Inserting condition: visit_id=15, tooth_id=48, condition_id=10, box_key='T-48-center', color='blue', case_type='permanent'
2025-12-08 06:17:04 - Condition inserted successfully
2025-12-08 06:17:04 - Processing item 3: Array
(
    [type] => condition
    [tooth_id] => 47
    [condition_code] => Un
    [box_key] => T-47-center
    [color] => red
    [case_type] => temporary
)

2025-12-08 06:17:04 - Resolving tooth_id for: '47'
2025-12-08 06:17:04 - Found tooth by tooth_id: 47 => 47
2025-12-08 06:17:04 - Item details: type=condition, tooth=47, box=T-47-center
2025-12-08 06:17:04 - Processing condition: 'Un', caseType: temporary
2025-12-08 06:17:04 - Looking for condition: 'Un', caseType: temporary, isPermanent: 0
2025-12-08 06:17:04 - Found condition_id: 11 for 'Un' in column code
2025-12-08 06:17:04 - Inserting condition: visit_id=15, tooth_id=47, condition_id=11, box_key='T-47-center', color='red', case_type='temporary'
2025-12-08 06:17:04 - Condition inserted successfully
2025-12-08 06:17:04 - Processing item 4: Array
(
    [type] => treatment
    [tooth_id] => 18
    [treatment_code] => TF
    [box_key] => R1-0
    [color] => 
    [case_type] => permanent
)

2025-12-08 06:17:04 - Resolving tooth_id for: '18'
2025-12-08 06:17:04 - Found tooth by tooth_id: 18 => 18
2025-12-08 06:17:04 - Item details: type=treatment, tooth=18, box=R1-0
2025-12-08 06:17:04 - Processing treatment: 'TF'
2025-12-08 06:17:04 - Looking for treatment: 'TF'
2025-12-08 06:17:04 - Found treatment_id: 12 for 'TF'
2025-12-08 06:17:04 - Inserting treatment: visit_id=15, tooth_id=18, treatment_id=12, box_key='R1-0', color='', case_type='permanent'
2025-12-08 06:17:04 - Treatment inserted successfully
2025-12-08 06:17:04 - Processing item 5: Array
(
    [type] => treatment
    [tooth_id] => 21
    [treatment_code] => TF
    [box_key] => R1-8
    [color] => 
    [case_type] => permanent
)

2025-12-08 06:17:04 - Resolving tooth_id for: '21'
2025-12-08 06:17:04 - Found tooth by tooth_id: 21 => 21
2025-12-08 06:17:04 - Item details: type=treatment, tooth=21, box=R1-8
2025-12-08 06:17:04 - Processing treatment: 'TF'
2025-12-08 06:17:04 - Looking for treatment: 'TF'
2025-12-08 06:17:04 - Found treatment_id: 12 for 'TF'
2025-12-08 06:17:04 - Inserting treatment: visit_id=15, tooth_id=21, treatment_id=12, box_key='R1-8', color='', case_type='permanent'
2025-12-08 06:17:04 - Treatment inserted successfully
2025-12-08 06:17:04 - Processing item 6: Array
(
    [type] => condition
    [tooth_id] => 18
    [condition_code] => Un
    [box_key] => R2-0
    [color] => blue
    [case_type] => permanent
)

2025-12-08 06:17:04 - Resolving tooth_id for: '18'
2025-12-08 06:17:04 - Found tooth by tooth_id: 18 => 18
2025-12-08 06:17:04 - Item details: type=condition, tooth=18, box=R2-0
2025-12-08 06:17:04 - Processing condition: 'Un', caseType: permanent
2025-12-08 06:17:04 - Looking for condition: 'Un', caseType: permanent, isPermanent: 1
2025-12-08 06:17:04 - Found condition_id: 10 for 'Un' in column code
2025-12-08 06:17:04 - Inserting condition: visit_id=15, tooth_id=18, condition_id=10, box_key='R2-0', color='blue', case_type='permanent'
2025-12-08 06:17:04 - Condition inserted successfully
2025-12-08 06:17:04 - Processing item 7: Array
(
    [type] => condition
    [tooth_id] => 17
    [condition_code] => Un
    [box_key] => R2-1
    [color] => red
    [case_type] => temporary
)

2025-12-08 06:17:04 - Resolving tooth_id for: '17'
2025-12-08 06:17:04 - Found tooth by tooth_id: 17 => 17
2025-12-08 06:17:04 - Item details: type=condition, tooth=17, box=R2-1
2025-12-08 06:17:04 - Processing condition: 'Un', caseType: temporary
2025-12-08 06:17:04 - Looking for condition: 'Un', caseType: temporary, isPermanent: 0
2025-12-08 06:17:04 - Found condition_id: 11 for 'Un' in column code
2025-12-08 06:17:04 - Inserting condition: visit_id=15, tooth_id=17, condition_id=11, box_key='R2-1', color='red', case_type='temporary'
2025-12-08 06:17:04 - Condition inserted successfully
2025-12-08 06:17:04 - Processing item 8: Array
(
    [type] => condition
    [tooth_id] => 17
    [condition_code] => Un
    [box_key] => R3-1
    [color] => blue
    [case_type] => permanent
)

2025-12-08 06:17:04 - Resolving tooth_id for: '17'
2025-12-08 06:17:04 - Found tooth by tooth_id: 17 => 17
2025-12-08 06:17:04 - Item details: type=condition, tooth=17, box=R3-1
2025-12-08 06:17:04 - Processing condition: 'Un', caseType: permanent
2025-12-08 06:17:04 - Looking for condition: 'Un', caseType: permanent, isPermanent: 1
2025-12-08 06:17:04 - Found condition_id: 10 for 'Un' in column code
2025-12-08 06:17:04 - Inserting condition: visit_id=15, tooth_id=17, condition_id=10, box_key='R3-1', color='blue', case_type='permanent'
2025-12-08 06:17:04 - Condition inserted successfully
2025-12-08 06:17:04 - Processing item 9: Array
(
    [type] => condition
    [tooth_id] => 16
    [condition_code] => Un
    [box_key] => R3-2
    [color] => red
    [case_type] => temporary
)

2025-12-08 06:17:04 - Resolving tooth_id for: '16'
2025-12-08 06:17:04 - Found tooth by tooth_id: 16 => 16
2025-12-08 06:17:04 - Item details: type=condition, tooth=16, box=R3-2
2025-12-08 06:17:04 - Processing condition: 'Un', caseType: temporary
2025-12-08 06:17:04 - Looking for condition: 'Un', caseType: temporary, isPermanent: 0
2025-12-08 06:17:04 - Found condition_id: 11 for 'Un' in column code
2025-12-08 06:17:04 - Inserting condition: visit_id=15, tooth_id=16, condition_id=11, box_key='R3-2', color='red', case_type='temporary'
2025-12-08 06:17:04 - Condition inserted successfully
2025-12-08 06:17:04 - Processing item 10: Array
(
    [type] => treatment
    [tooth_id] => 18
    [treatment_code] => TF
    [box_key] => R4-0
    [color] => 
    [case_type] => permanent
)

2025-12-08 06:17:04 - Resolving tooth_id for: '18'
2025-12-08 06:17:04 - Found tooth by tooth_id: 18 => 18
2025-12-08 06:17:04 - Item details: type=treatment, tooth=18, box=R4-0
2025-12-08 06:17:04 - Processing treatment: 'TF'
2025-12-08 06:17:04 - Looking for treatment: 'TF'
2025-12-08 06:17:04 - Found treatment_id: 12 for 'TF'
2025-12-08 06:17:04 - Inserting treatment: visit_id=15, tooth_id=18, treatment_id=12, box_key='R4-0', color='', case_type='permanent'
2025-12-08 06:17:04 - Treatment inserted successfully
2025-12-08 06:17:04 - Processing item 11: Array
(
    [type] => treatment
    [tooth_id] => 13
    [treatment_code] => TF
    [box_key] => R4-5
    [color] => 
    [case_type] => permanent
)

2025-12-08 06:17:04 - Resolving tooth_id for: '13'
2025-12-08 06:17:04 - Found tooth by tooth_id: 13 => 13
2025-12-08 06:17:04 - Item details: type=treatment, tooth=13, box=R4-5
2025-12-08 06:17:04 - Processing treatment: 'TF'
2025-12-08 06:17:04 - Looking for treatment: 'TF'
2025-12-08 06:17:04 - Found treatment_id: 12 for 'TF'
2025-12-08 06:17:04 - Inserting treatment: visit_id=15, tooth_id=13, treatment_id=12, box_key='R4-5', color='', case_type='permanent'
2025-12-08 06:17:04 - Treatment inserted successfully
2025-12-08 06:17:04 - Transaction committed successfully. Inserted: 12 items
2025-12-08 06:17:04 - Sending response: {"success":true,"visit_id":"15","inserted":12,"warnings":[]}
2025-12-09 03:15:04 - Received save request: {"action":"save","patient_id":"7","visit_id":"0","oral_data":[{"type":"condition","tooth_id":"35","condition_code":"F","box_key":"T-35-center","color":"blue","case_type":"permanent"},{"type":"treatment","tooth_id":"28","treatment_code":"PF","box_key":"R1-15","color":"","case_type":"permanent"},{"type":"condition","tooth_id":"25","condition_code":"F","box_key":"R3-12","color":"blue","case_type":"permanent"},{"type":"treatment","tooth_id":"28","treatment_code":"PF","box_key":"R4-15","color":"","case_type":"permanent"}]}
2025-12-09 03:15:04 - Parsed input: Array
(
    [action] => save
    [patient_id] => 7
    [visit_id] => 0
    [oral_data] => Array
        (
            [0] => Array
                (
                    [type] => condition
                    [tooth_id] => 35
                    [condition_code] => F
                    [box_key] => T-35-center
                    [color] => blue
                    [case_type] => permanent
                )

            [1] => Array
                (
                    [type] => treatment
                    [tooth_id] => 28
                    [treatment_code] => PF
                    [box_key] => R1-15
                    [color] => 
                    [case_type] => permanent
                )

            [2] => Array
                (
                    [type] => condition
                    [tooth_id] => 25
                    [condition_code] => F
                    [box_key] => R3-12
                    [color] => blue
                    [case_type] => permanent
                )

            [3] => Array
                (
                    [type] => treatment
                    [tooth_id] => 28
                    [treatment_code] => PF
                    [box_key] => R4-15
                    [color] => 
                    [case_type] => permanent
                )

        )

)

2025-12-09 03:15:04 - Starting transaction
2025-12-09 03:15:04 - Created new visit_id: 17 for patient: 7
2025-12-09 03:15:04 - Processing item 0: Array
(
    [type] => condition
    [tooth_id] => 35
    [condition_code] => F
    [box_key] => T-35-center
    [color] => blue
    [case_type] => permanent
)

2025-12-09 03:15:04 - Resolving tooth_id for: '35'
2025-12-09 03:15:04 - Found tooth by tooth_id: 35 => 35
2025-12-09 03:15:04 - Item details: type=condition, tooth=35, box=T-35-center
2025-12-09 03:15:04 - Processing condition: 'F', caseType: permanent
2025-12-09 03:15:04 - Looking for condition: 'F', caseType: permanent, isPermanent: 1
2025-12-09 03:15:04 - Found condition_id: 4 for 'F' in column code
2025-12-09 03:15:04 - Inserting condition: visit_id=17, tooth_id=35, condition_id=4, box_key='T-35-center', color='blue', case_type='permanent'
2025-12-09 03:15:04 - Condition inserted successfully
2025-12-09 03:15:04 - Processing item 1: Array
(
    [type] => treatment
    [tooth_id] => 28
    [treatment_code] => PF
    [box_key] => R1-15
    [color] => 
    [case_type] => permanent
)

2025-12-09 03:15:04 - Resolving tooth_id for: '28'
2025-12-09 03:15:04 - Found tooth by tooth_id: 28 => 28
2025-12-09 03:15:04 - Item details: type=treatment, tooth=28, box=R1-15
2025-12-09 03:15:04 - Processing treatment: 'PF'
2025-12-09 03:15:04 - Looking for treatment: 'PF'
2025-12-09 03:15:04 - Found treatment_id: 11 for 'PF'
2025-12-09 03:15:04 - Inserting treatment: visit_id=17, tooth_id=28, treatment_id=11, box_key='R1-15', color='', case_type='permanent'
2025-12-09 03:15:04 - Treatment inserted successfully
2025-12-09 03:15:04 - Processing item 2: Array
(
    [type] => condition
    [tooth_id] => 25
    [condition_code] => F
    [box_key] => R3-12
    [color] => blue
    [case_type] => permanent
)

2025-12-09 03:15:04 - Resolving tooth_id for: '25'
2025-12-09 03:15:04 - Found tooth by tooth_id: 25 => 25
2025-12-09 03:15:04 - Item details: type=condition, tooth=25, box=R3-12
2025-12-09 03:15:04 - Processing condition: 'F', caseType: permanent
2025-12-09 03:15:04 - Looking for condition: 'F', caseType: permanent, isPermanent: 1
2025-12-09 03:15:04 - Found condition_id: 4 for 'F' in column code
2025-12-09 03:15:04 - Inserting condition: visit_id=17, tooth_id=25, condition_id=4, box_key='R3-12', color='blue', case_type='permanent'
2025-12-09 03:15:04 - Condition inserted successfully
2025-12-09 03:15:04 - Processing item 3: Array
(
    [type] => treatment
    [tooth_id] => 28
    [treatment_code] => PF
    [box_key] => R4-15
    [color] => 
    [case_type] => permanent
)

2025-12-09 03:15:04 - Resolving tooth_id for: '28'
2025-12-09 03:15:04 - Found tooth by tooth_id: 28 => 28
2025-12-09 03:15:04 - Item details: type=treatment, tooth=28, box=R4-15
2025-12-09 03:15:04 - Processing treatment: 'PF'
2025-12-09 03:15:04 - Looking for treatment: 'PF'
2025-12-09 03:15:04 - Found treatment_id: 11 for 'PF'
2025-12-09 03:15:04 - Inserting treatment: visit_id=17, tooth_id=28, treatment_id=11, box_key='R4-15', color='', case_type='permanent'
2025-12-09 03:15:04 - Treatment inserted successfully
2025-12-09 03:15:04 - Transaction committed successfully. Inserted: 4 items
2025-12-09 03:15:04 - Sending response: {"success":true,"visit_id":"17","inserted":4,"warnings":[]}
2025-12-09 13:56:11 - Received save request: {"action":"save","patient_id":"8","visit_id":"0","oral_data":[{"type":"condition","tooth_id":"85","condition_code":"S","box_key":"T-85-center","color":"blue","case_type":"permanent"},{"type":"condition","tooth_id":"75","condition_code":"JC","box_key":"T-75-center","color":"red","case_type":"permanent"},{"type":"condition","tooth_id":"15","condition_code":"S","box_key":"R3-3","color":"blue","case_type":"permanent"},{"type":"condition","tooth_id":"25","condition_code":"JC","box_key":"R3-12","color":"red","case_type":"permanent"},{"type":"treatment","tooth_id":"15","treatment_code":"FV","box_key":"R4-3","color":"","case_type":"permanent"},{"type":"treatment","tooth_id":"25","treatment_code":"FV","box_key":"R4-12","color":"","case_type":"permanent"}]}
2025-12-09 13:56:11 - Parsed input: Array
(
    [action] => save
    [patient_id] => 8
    [visit_id] => 0
    [oral_data] => Array
        (
            [0] => Array
                (
                    [type] => condition
                    [tooth_id] => 85
                    [condition_code] => S
                    [box_key] => T-85-center
                    [color] => blue
                    [case_type] => permanent
                )

            [1] => Array
                (
                    [type] => condition
                    [tooth_id] => 75
                    [condition_code] => JC
                    [box_key] => T-75-center
                    [color] => red
                    [case_type] => permanent
                )

            [2] => Array
                (
                    [type] => condition
                    [tooth_id] => 15
                    [condition_code] => S
                    [box_key] => R3-3
                    [color] => blue
                    [case_type] => permanent
                )

            [3] => Array
                (
                    [type] => condition
                    [tooth_id] => 25
                    [condition_code] => JC
                    [box_key] => R3-12
                    [color] => red
                    [case_type] => permanent
                )

            [4] => Array
                (
                    [type] => treatment
                    [tooth_id] => 15
                    [treatment_code] => FV
                    [box_key] => R4-3
                    [color] => 
                    [case_type] => permanent
                )

            [5] => Array
                (
                    [type] => treatment
                    [tooth_id] => 25
                    [treatment_code] => FV
                    [box_key] => R4-12
                    [color] => 
                    [case_type] => permanent
                )

        )

)

2025-12-09 13:56:11 - Starting transaction
2025-12-09 13:56:11 - Created new visit_id: 19 for patient: 8
2025-12-09 13:56:11 - Processing item 0: Array
(
    [type] => condition
    [tooth_id] => 85
    [condition_code] => S
    [box_key] => T-85-center
    [color] => blue
    [case_type] => permanent
)

2025-12-09 13:56:11 - Resolving tooth_id for: '85'
2025-12-09 13:56:11 - Found tooth by FDI: 85 => 52
2025-12-09 13:56:11 - Item details: type=condition, tooth=52, box=T-85-center
2025-12-09 13:56:11 - Processing condition: 'S', caseType: permanent
2025-12-09 13:56:11 - Looking for condition: 'S', caseType: permanent, isPermanent: 1
2025-12-09 13:56:11 - Found condition_id: 12 for 'S' in column code
2025-12-09 13:56:11 - Inserting condition: visit_id=19, tooth_id=52, condition_id=12, box_key='T-85-center', color='blue', case_type='permanent'
2025-12-09 13:56:11 - Condition inserted successfully
2025-12-09 13:56:11 - Processing item 1: Array
(
    [type] => condition
    [tooth_id] => 75
    [condition_code] => JC
    [box_key] => T-75-center
    [color] => red
    [case_type] => permanent
)

2025-12-09 13:56:11 - Resolving tooth_id for: '75'
2025-12-09 13:56:11 - Found tooth by FDI: 75 => 47
2025-12-09 13:56:11 - Item details: type=condition, tooth=47, box=T-75-center
2025-12-09 13:56:11 - Processing condition: 'JC', caseType: permanent
2025-12-09 13:56:11 - Looking for condition: 'JC', caseType: permanent, isPermanent: 1
2025-12-09 13:56:11 - Found condition_id: 14 for 'JC' in column code
2025-12-09 13:56:11 - Inserting condition: visit_id=19, tooth_id=47, condition_id=14, box_key='T-75-center', color='red', case_type='permanent'
2025-12-09 13:56:12 - Condition inserted successfully
2025-12-09 13:56:12 - Processing item 2: Array
(
    [type] => condition
    [tooth_id] => 15
    [condition_code] => S
    [box_key] => R3-3
    [color] => blue
    [case_type] => permanent
)

2025-12-09 13:56:12 - Resolving tooth_id for: '15'
2025-12-09 13:56:12 - Found tooth by tooth_id: 15 => 15
2025-12-09 13:56:12 - Item details: type=condition, tooth=15, box=R3-3
2025-12-09 13:56:12 - Processing condition: 'S', caseType: permanent
2025-12-09 13:56:12 - Looking for condition: 'S', caseType: permanent, isPermanent: 1
2025-12-09 13:56:12 - Found condition_id: 12 for 'S' in column code
2025-12-09 13:56:12 - Inserting condition: visit_id=19, tooth_id=15, condition_id=12, box_key='R3-3', color='blue', case_type='permanent'
2025-12-09 13:56:12 - Condition inserted successfully
2025-12-09 13:56:12 - Processing item 3: Array
(
    [type] => condition
    [tooth_id] => 25
    [condition_code] => JC
    [box_key] => R3-12
    [color] => red
    [case_type] => permanent
)

2025-12-09 13:56:12 - Resolving tooth_id for: '25'
2025-12-09 13:56:12 - Found tooth by tooth_id: 25 => 25
2025-12-09 13:56:12 - Item details: type=condition, tooth=25, box=R3-12
2025-12-09 13:56:12 - Processing condition: 'JC', caseType: permanent
2025-12-09 13:56:12 - Looking for condition: 'JC', caseType: permanent, isPermanent: 1
2025-12-09 13:56:12 - Found condition_id: 14 for 'JC' in column code
2025-12-09 13:56:12 - Inserting condition: visit_id=19, tooth_id=25, condition_id=14, box_key='R3-12', color='red', case_type='permanent'
2025-12-09 13:56:12 - Condition inserted successfully
2025-12-09 13:56:12 - Processing item 4: Array
(
    [type] => treatment
    [tooth_id] => 15
    [treatment_code] => FV
    [box_key] => R4-3
    [color] => 
    [case_type] => permanent
)

2025-12-09 13:56:12 - Resolving tooth_id for: '15'
2025-12-09 13:56:12 - Found tooth by tooth_id: 15 => 15
2025-12-09 13:56:12 - Item details: type=treatment, tooth=15, box=R4-3
2025-12-09 13:56:12 - Processing treatment: 'FV'
2025-12-09 13:56:12 - Looking for treatment: 'FV'
2025-12-09 13:56:12 - Found treatment_id: 8 for 'FV'
2025-12-09 13:56:12 - Inserting treatment: visit_id=19, tooth_id=15, treatment_id=8, box_key='R4-3', color='', case_type='permanent'
2025-12-09 13:56:12 - Treatment inserted successfully
2025-12-09 13:56:12 - Processing item 5: Array
(
    [type] => treatment
    [tooth_id] => 25
    [treatment_code] => FV
    [box_key] => R4-12
    [color] => 
    [case_type] => permanent
)

2025-12-09 13:56:12 - Resolving tooth_id for: '25'
2025-12-09 13:56:12 - Found tooth by tooth_id: 25 => 25
2025-12-09 13:56:12 - Item details: type=treatment, tooth=25, box=R4-12
2025-12-09 13:56:12 - Processing treatment: 'FV'
2025-12-09 13:56:12 - Looking for treatment: 'FV'
2025-12-09 13:56:12 - Found treatment_id: 8 for 'FV'
2025-12-09 13:56:12 - Inserting treatment: visit_id=19, tooth_id=25, treatment_id=8, box_key='R4-12', color='', case_type='permanent'
2025-12-09 13:56:12 - Treatment inserted successfully
2025-12-09 13:56:12 - Transaction committed successfully. Inserted: 6 items
2025-12-09 13:56:12 - Sending response: {"success":true,"visit_id":"19","inserted":6,"warnings":[]}
2026-01-04 09:50:02 - Received save request: {"action":"save","patient_id":"8","visit_id":"0","visit_date":"2026-01-04","oral_data":[{"type":"condition","tooth_id":"74","condition_code":"S","box_key":"T-74-center","color":"red","case_type":"temporary"},{"type":"condition","tooth_id":"24","condition_code":"S","box_key":"R3-11","color":"red","case_type":"temporary"},{"type":"treatment","tooth_id":"24","treatment_code":"X","box_key":"R4-11","color":"","case_type":"permanent"}]}
2026-01-04 09:50:02 - Parsed input: Array
(
    [action] => save
    [patient_id] => 8
    [visit_id] => 0
    [visit_date] => 2026-01-04
    [oral_data] => Array
        (
            [0] => Array
                (
                    [type] => condition
                    [tooth_id] => 74
                    [condition_code] => S
                    [box_key] => T-74-center
                    [color] => red
                    [case_type] => temporary
                )

            [1] => Array
                (
                    [type] => condition
                    [tooth_id] => 24
                    [condition_code] => S
                    [box_key] => R3-11
                    [color] => red
                    [case_type] => temporary
                )

            [2] => Array
                (
                    [type] => treatment
                    [tooth_id] => 24
                    [treatment_code] => X
                    [box_key] => R4-11
                    [color] => 
                    [case_type] => permanent
                )

        )

)

2026-01-04 09:50:02 - Starting transaction
2026-01-04 09:50:02 - Created new visit_id: 20 for patient: 8 with date: 2026-01-04
2026-01-04 09:50:02 - Processing item 0: Array
(
    [type] => condition
    [tooth_id] => 74
    [condition_code] => S
    [box_key] => T-74-center
    [color] => red
    [case_type] => temporary
)

2026-01-04 09:50:02 - Resolving tooth_id for: '74'
2026-01-04 09:50:02 - Found tooth by FDI: 74 => 46
2026-01-04 09:50:02 - Item details: type=condition, tooth=46, box=T-74-center
2026-01-04 09:50:02 - Processing condition: 'S', caseType: temporary
2026-01-04 09:50:02 - Looking for condition: 'S', caseType: temporary, isPermanent: 0
2026-01-04 09:50:02 - Found condition_id: 13 for 'S' in column code
2026-01-04 09:50:02 - Inserting condition: visit_id=20, tooth_id=46, condition_id=13, box_key='T-74-center', color='red', case_type='temporary'
2026-01-04 09:50:02 - Condition inserted successfully
2026-01-04 09:50:02 - Processing item 1: Array
(
    [type] => condition
    [tooth_id] => 24
    [condition_code] => S
    [box_key] => R3-11
    [color] => red
    [case_type] => temporary
)

2026-01-04 09:50:02 - Resolving tooth_id for: '24'
2026-01-04 09:50:02 - Found tooth by tooth_id: 24 => 24
2026-01-04 09:50:02 - Item details: type=condition, tooth=24, box=R3-11
2026-01-04 09:50:02 - Processing condition: 'S', caseType: temporary
2026-01-04 09:50:02 - Looking for condition: 'S', caseType: temporary, isPermanent: 0
2026-01-04 09:50:02 - Found condition_id: 13 for 'S' in column code
2026-01-04 09:50:02 - Inserting condition: visit_id=20, tooth_id=24, condition_id=13, box_key='R3-11', color='red', case_type='temporary'
2026-01-04 09:50:02 - Condition inserted successfully
2026-01-04 09:50:02 - Processing item 2: Array
(
    [type] => treatment
    [tooth_id] => 24
    [treatment_code] => X
    [box_key] => R4-11
    [color] => 
    [case_type] => permanent
)

2026-01-04 09:50:02 - Resolving tooth_id for: '24'
2026-01-04 09:50:02 - Found tooth by tooth_id: 24 => 24
2026-01-04 09:50:02 - Item details: type=treatment, tooth=24, box=R4-11
2026-01-04 09:50:02 - Processing treatment: 'X'
2026-01-04 09:50:02 - Looking for treatment: 'X'
2026-01-04 09:50:02 - Found treatment_id: 13 for 'X'
2026-01-04 09:50:02 - Inserting treatment: visit_id=20, tooth_id=24, treatment_id=13, box_key='R4-11', color='', case_type='permanent'
2026-01-04 09:50:02 - Treatment inserted successfully
2026-01-04 09:50:02 - Transaction committed successfully. Inserted: 3 items
2026-01-04 09:50:02 - Sending response: {"success":true,"visit_id":"20","inserted":3,"warnings":[]}
2026-01-06 18:59:14 - Received save request: {"action":"save","patient_id":"16","visit_id":"0","visit_date":"2026-01-06","oral_data":[{"type":"condition","tooth_id":"45","condition_code":"S","box_key":"T-73-center","color":"blue","case_type":"permanent"},{"type":"condition","tooth_id":"11","condition_code":"S","box_key":"R3-10","color":"blue","case_type":"permanent"},{"type":"treatment","tooth_id":"11","treatment_code":"PF","box_key":"R4-10","color":"","case_type":"permanent"}]}
2026-01-06 18:59:14 - Parsed input: Array
(
    [action] => save
    [patient_id] => 16
    [visit_id] => 0
    [visit_date] => 2026-01-06
    [oral_data] => Array
        (
            [0] => Array
                (
                    [type] => condition
                    [tooth_id] => 45
                    [condition_code] => S
                    [box_key] => T-73-center
                    [color] => blue
                    [case_type] => permanent
                )

            [1] => Array
                (
                    [type] => condition
                    [tooth_id] => 11
                    [condition_code] => S
                    [box_key] => R3-10
                    [color] => blue
                    [case_type] => permanent
                )

            [2] => Array
                (
                    [type] => treatment
                    [tooth_id] => 11
                    [treatment_code] => PF
                    [box_key] => R4-10
                    [color] => 
                    [case_type] => permanent
                )

        )

)

2026-01-06 18:59:14 - Starting transaction
2026-01-06 18:59:14 - Created new visit_id: 22 for patient: 16 with date: 2026-01-06
2026-01-06 18:59:14 - Processing item 0: Array
(
    [type] => condition
    [tooth_id] => 45
    [condition_code] => S
    [box_key] => T-73-center
    [color] => blue
    [case_type] => permanent
)

2026-01-06 18:59:14 - Resolving tooth_id for: '45'
2026-01-06 18:59:14 - Found tooth by tooth_id: 45 => 45
2026-01-06 18:59:14 - Item details: type=condition, tooth=45, box=T-73-center
2026-01-06 18:59:14 - Processing condition: 'S', caseType: permanent
2026-01-06 18:59:14 - Looking for condition: 'S', caseType: permanent, isPermanent: 1
2026-01-06 18:59:14 - Found condition_id: 12 for 'S' in column code
2026-01-06 18:59:14 - Inserting condition: visit_id=22, tooth_id=45, condition_id=12, box_key='T-73-center', color='blue', case_type='permanent'
2026-01-06 18:59:14 - Condition inserted successfully
2026-01-06 18:59:14 - Processing item 1: Array
(
    [type] => condition
    [tooth_id] => 11
    [condition_code] => S
    [box_key] => R3-10
    [color] => blue
    [case_type] => permanent
)

2026-01-06 18:59:14 - Resolving tooth_id for: '11'
2026-01-06 18:59:14 - Found tooth by tooth_id: 11 => 11
2026-01-06 18:59:14 - Item details: type=condition, tooth=11, box=R3-10
2026-01-06 18:59:14 - Processing condition: 'S', caseType: permanent
2026-01-06 18:59:14 - Looking for condition: 'S', caseType: permanent, isPermanent: 1
2026-01-06 18:59:14 - Found condition_id: 12 for 'S' in column code
2026-01-06 18:59:14 - Inserting condition: visit_id=22, tooth_id=11, condition_id=12, box_key='R3-10', color='blue', case_type='permanent'
2026-01-06 18:59:14 - Condition inserted successfully
2026-01-06 18:59:14 - Processing item 2: Array
(
    [type] => treatment
    [tooth_id] => 11
    [treatment_code] => PF
    [box_key] => R4-10
    [color] => 
    [case_type] => permanent
)

2026-01-06 18:59:14 - Resolving tooth_id for: '11'
2026-01-06 18:59:14 - Found tooth by tooth_id: 11 => 11
2026-01-06 18:59:14 - Item details: type=treatment, tooth=11, box=R4-10
2026-01-06 18:59:14 - Processing treatment: 'PF'
2026-01-06 18:59:14 - Looking for treatment: 'PF'
2026-01-06 18:59:14 - Found treatment_id: 11 for 'PF'
2026-01-06 18:59:14 - Inserting treatment: visit_id=22, tooth_id=11, treatment_id=11, box_key='R4-10', color='', case_type='permanent'
2026-01-06 18:59:14 - Treatment inserted successfully
2026-01-06 18:59:14 - Transaction committed successfully. Inserted: 3 items
2026-01-06 18:59:14 - Sending response: {"success":true,"visit_id":"22","inserted":3,"warnings":[]}
2026-01-08 06:00:47 - Received save request: {"action":"save","patient_id":"18","visit_id":"0","visit_date":"2026-01-08","oral_data":[{"type":"condition","tooth_id":"46","condition_code":"JC","box_key":"T-74-center","color":"blue","case_type":"permanent"},{"type":"condition","tooth_id":"12","condition_code":"JC","box_key":"R3-11","color":"blue","case_type":"permanent"},{"type":"treatment","tooth_id":"12","treatment_code":"FV","box_key":"R4-11","color":"","case_type":"permanent"}]}
2026-01-08 06:00:47 - Parsed input: Array
(
    [action] => save
    [patient_id] => 18
    [visit_id] => 0
    [visit_date] => 2026-01-08
    [oral_data] => Array
        (
            [0] => Array
                (
                    [type] => condition
                    [tooth_id] => 46
                    [condition_code] => JC
                    [box_key] => T-74-center
                    [color] => blue
                    [case_type] => permanent
                )

            [1] => Array
                (
                    [type] => condition
                    [tooth_id] => 12
                    [condition_code] => JC
                    [box_key] => R3-11
                    [color] => blue
                    [case_type] => permanent
                )

            [2] => Array
                (
                    [type] => treatment
                    [tooth_id] => 12
                    [treatment_code] => FV
                    [box_key] => R4-11
                    [color] => 
                    [case_type] => permanent
                )

        )

)

2026-01-08 06:00:47 - Starting transaction
2026-01-08 06:00:47 - Created new visit_id: 23 for patient: 18 with date: 2026-01-08
2026-01-08 06:00:47 - Processing item 0: Array
(
    [type] => condition
    [tooth_id] => 46
    [condition_code] => JC
    [box_key] => T-74-center
    [color] => blue
    [case_type] => permanent
)

2026-01-08 06:00:47 - Resolving tooth_id for: '46'
2026-01-08 06:00:47 - Found tooth by tooth_id: 46 => 46
2026-01-08 06:00:47 - Item details: type=condition, tooth=46, box=T-74-center
2026-01-08 06:00:47 - Processing condition: 'JC', caseType: permanent
2026-01-08 06:00:47 - Looking for condition: 'JC', caseType: permanent, isPermanent: 1
2026-01-08 06:00:47 - Found condition_id: 14 for 'JC' in column code
2026-01-08 06:00:47 - Inserting condition: visit_id=23, tooth_id=46, condition_id=14, box_key='T-74-center', color='blue', case_type='permanent'
2026-01-08 06:00:47 - Condition inserted successfully
2026-01-08 06:00:47 - Processing item 1: Array
(
    [type] => condition
    [tooth_id] => 12
    [condition_code] => JC
    [box_key] => R3-11
    [color] => blue
    [case_type] => permanent
)

2026-01-08 06:00:47 - Resolving tooth_id for: '12'
2026-01-08 06:00:47 - Found tooth by tooth_id: 12 => 12
2026-01-08 06:00:47 - Item details: type=condition, tooth=12, box=R3-11
2026-01-08 06:00:47 - Processing condition: 'JC', caseType: permanent
2026-01-08 06:00:47 - Looking for condition: 'JC', caseType: permanent, isPermanent: 1
2026-01-08 06:00:47 - Found condition_id: 14 for 'JC' in column code
2026-01-08 06:00:47 - Inserting condition: visit_id=23, tooth_id=12, condition_id=14, box_key='R3-11', color='blue', case_type='permanent'
2026-01-08 06:00:47 - Condition inserted successfully
2026-01-08 06:00:47 - Processing item 2: Array
(
    [type] => treatment
    [tooth_id] => 12
    [treatment_code] => FV
    [box_key] => R4-11
    [color] => 
    [case_type] => permanent
)

2026-01-08 06:00:47 - Resolving tooth_id for: '12'
2026-01-08 06:00:47 - Found tooth by tooth_id: 12 => 12
2026-01-08 06:00:47 - Item details: type=treatment, tooth=12, box=R4-11
2026-01-08 06:00:47 - Processing treatment: 'FV'
2026-01-08 06:00:47 - Looking for treatment: 'FV'
2026-01-08 06:00:47 - Found treatment_id: 8 for 'FV'
2026-01-08 06:00:47 - Inserting treatment: visit_id=23, tooth_id=12, treatment_id=8, box_key='R4-11', color='', case_type='permanent'
2026-01-08 06:00:47 - Treatment inserted successfully
2026-01-08 06:00:47 - Transaction committed successfully. Inserted: 3 items
2026-01-08 06:00:47 - Sending response: {"success":true,"visit_id":"23","inserted":3,"warnings":[]}
2026-01-13 17:47:58 - Received save request: {"action":"save","patient_id":"18","visit_id":"0","visit_date":"2026-01-08","oral_data":[{"type":"condition","tooth_id":"45","condition_code":"S","box_key":"T-73-center","color":"blue","case_type":"permanent"},{"type":"condition","tooth_id":"11","condition_code":"S","box_key":"R3-10","color":"blue","case_type":"permanent"},{"type":"treatment","tooth_id":"11","treatment_code":"FV","box_key":"R4-10","color":"","case_type":"permanent"}]}
2026-01-13 17:47:58 - Parsed input: Array
(
    [action] => save
    [patient_id] => 18
    [visit_id] => 0
    [visit_date] => 2026-01-08
    [oral_data] => Array
        (
            [0] => Array
                (
                    [type] => condition
                    [tooth_id] => 45
                    [condition_code] => S
                    [box_key] => T-73-center
                    [color] => blue
                    [case_type] => permanent
                )

            [1] => Array
                (
                    [type] => condition
                    [tooth_id] => 11
                    [condition_code] => S
                    [box_key] => R3-10
                    [color] => blue
                    [case_type] => permanent
                )

            [2] => Array
                (
                    [type] => treatment
                    [tooth_id] => 11
                    [treatment_code] => FV
                    [box_key] => R4-10
                    [color] => 
                    [case_type] => permanent
                )

        )

)

2026-01-13 17:47:58 - Starting transaction
2026-01-13 17:47:58 - Created new visit_id: 24 for patient: 18 with date: 2026-01-08
2026-01-13 17:47:58 - Processing item 0: Array
(
    [type] => condition
    [tooth_id] => 45
    [condition_code] => S
    [box_key] => T-73-center
    [color] => blue
    [case_type] => permanent
)

2026-01-13 17:47:58 - Resolving tooth_id for: '45'
2026-01-13 17:47:58 - Found tooth by tooth_id: 45 => 45
2026-01-13 17:47:58 - Item details: type=condition, tooth=45, box=T-73-center
2026-01-13 17:47:58 - Processing condition: 'S', caseType: permanent
2026-01-13 17:47:58 - Looking for condition: 'S', caseType: permanent, isPermanent: 1
2026-01-13 17:47:58 - Found condition_id: 12 for 'S' in column code
2026-01-13 17:47:58 - Inserting condition: visit_id=24, tooth_id=45, condition_id=12, box_key='T-73-center', color='blue', case_type='permanent'
2026-01-13 17:47:58 - Condition inserted successfully
2026-01-13 17:47:58 - Processing item 1: Array
(
    [type] => condition
    [tooth_id] => 11
    [condition_code] => S
    [box_key] => R3-10
    [color] => blue
    [case_type] => permanent
)

2026-01-13 17:47:58 - Resolving tooth_id for: '11'
2026-01-13 17:47:58 - Found tooth by tooth_id: 11 => 11
2026-01-13 17:47:58 - Item details: type=condition, tooth=11, box=R3-10
2026-01-13 17:47:58 - Processing condition: 'S', caseType: permanent
2026-01-13 17:47:58 - Looking for condition: 'S', caseType: permanent, isPermanent: 1
2026-01-13 17:47:58 - Found condition_id: 12 for 'S' in column code
2026-01-13 17:47:58 - Inserting condition: visit_id=24, tooth_id=11, condition_id=12, box_key='R3-10', color='blue', case_type='permanent'
2026-01-13 17:47:58 - Condition inserted successfully
2026-01-13 17:47:58 - Processing item 2: Array
(
    [type] => treatment
    [tooth_id] => 11
    [treatment_code] => FV
    [box_key] => R4-10
    [color] => 
    [case_type] => permanent
)

2026-01-13 17:47:58 - Resolving tooth_id for: '11'
2026-01-13 17:47:58 - Found tooth by tooth_id: 11 => 11
2026-01-13 17:47:58 - Item details: type=treatment, tooth=11, box=R4-10
2026-01-13 17:47:58 - Processing treatment: 'FV'
2026-01-13 17:47:58 - Looking for treatment: 'FV'
2026-01-13 17:47:58 - Found treatment_id: 8 for 'FV'
2026-01-13 17:47:58 - Inserting treatment: visit_id=24, tooth_id=11, treatment_id=8, box_key='R4-10', color='', case_type='permanent'
2026-01-13 17:47:58 - Treatment inserted successfully
2026-01-13 17:47:58 - Transaction committed successfully. Inserted: 3 items
2026-01-13 17:47:58 - Sending response: {"success":true,"visit_id":"24","inserted":3,"warnings":[]}
2026-01-13 18:00:16 - Received save request: {"action":"save","patient_id":"18","visit_id":"0","visit_date":"2026-01-08","oral_data":[{"type":"condition","tooth_id":"44","condition_code":"S","box_key":"T-72-center","color":"blue","case_type":"permanent"},{"type":"condition","tooth_id":"10","condition_code":"S","box_key":"R3-9","color":"blue","case_type":"permanent"},{"type":"treatment","tooth_id":"10","treatment_code":"FV","box_key":"R4-9","color":"","case_type":"permanent"}]}
2026-01-13 18:00:16 - Parsed input: Array
(
    [action] => save
    [patient_id] => 18
    [visit_id] => 0
    [visit_date] => 2026-01-08
    [oral_data] => Array
        (
            [0] => Array
                (
                    [type] => condition
                    [tooth_id] => 44
                    [condition_code] => S
                    [box_key] => T-72-center
                    [color] => blue
                    [case_type] => permanent
                )

            [1] => Array
                (
                    [type] => condition
                    [tooth_id] => 10
                    [condition_code] => S
                    [box_key] => R3-9
                    [color] => blue
                    [case_type] => permanent
                )

            [2] => Array
                (
                    [type] => treatment
                    [tooth_id] => 10
                    [treatment_code] => FV
                    [box_key] => R4-9
                    [color] => 
                    [case_type] => permanent
                )

        )

)

2026-01-13 18:00:16 - Starting transaction
2026-01-13 18:00:16 - Created new visit_id: 25 for patient: 18 with date: 2026-01-08
2026-01-13 18:00:16 - Processing item 0: Array
(
    [type] => condition
    [tooth_id] => 44
    [condition_code] => S
    [box_key] => T-72-center
    [color] => blue
    [case_type] => permanent
)

2026-01-13 18:00:16 - Resolving tooth_id for: '44'
2026-01-13 18:00:16 - Found tooth by tooth_id: 44 => 44
2026-01-13 18:00:16 - Item details: type=condition, tooth=44, box=T-72-center
2026-01-13 18:00:16 - Processing condition: 'S', caseType: permanent
2026-01-13 18:00:16 - Looking for condition: 'S', caseType: permanent, isPermanent: 1
2026-01-13 18:00:16 - Found condition_id: 12 for 'S' in column code
2026-01-13 18:00:16 - Inserting condition: visit_id=25, tooth_id=44, condition_id=12, box_key='T-72-center', color='blue', case_type='permanent'
2026-01-13 18:00:16 - Condition inserted successfully
2026-01-13 18:00:16 - Processing item 1: Array
(
    [type] => condition
    [tooth_id] => 10
    [condition_code] => S
    [box_key] => R3-9
    [color] => blue
    [case_type] => permanent
)

2026-01-13 18:00:16 - Resolving tooth_id for: '10'
2026-01-13 18:00:16 - Found tooth by tooth_id: 10 => 10
2026-01-13 18:00:16 - Item details: type=condition, tooth=10, box=R3-9
2026-01-13 18:00:16 - Processing condition: 'S', caseType: permanent
2026-01-13 18:00:16 - Looking for condition: 'S', caseType: permanent, isPermanent: 1
2026-01-13 18:00:16 - Found condition_id: 12 for 'S' in column code
2026-01-13 18:00:16 - Inserting condition: visit_id=25, tooth_id=10, condition_id=12, box_key='R3-9', color='blue', case_type='permanent'
2026-01-13 18:00:16 - Condition inserted successfully
2026-01-13 18:00:16 - Processing item 2: Array
(
    [type] => treatment
    [tooth_id] => 10
    [treatment_code] => FV
    [box_key] => R4-9
    [color] => 
    [case_type] => permanent
)

2026-01-13 18:00:16 - Resolving tooth_id for: '10'
2026-01-13 18:00:16 - Found tooth by tooth_id: 10 => 10
2026-01-13 18:00:16 - Item details: type=treatment, tooth=10, box=R4-9
2026-01-13 18:00:16 - Processing treatment: 'FV'
2026-01-13 18:00:16 - Looking for treatment: 'FV'
2026-01-13 18:00:16 - Found treatment_id: 8 for 'FV'
2026-01-13 18:00:16 - Inserting treatment: visit_id=25, tooth_id=10, treatment_id=8, box_key='R4-9', color='', case_type='permanent'
2026-01-13 18:00:16 - Treatment inserted successfully
2026-01-13 18:00:16 - Transaction committed successfully. Inserted: 3 items
2026-01-13 18:00:16 - Sending response: {"success":true,"visit_id":"25","inserted":3,"warnings":[]}
2026-01-13 21:22:45 - Received save request: {"action":"save","patient_id":"16","visit_id":"0","visit_date":"2026-01-13","oral_data":[{"type":"condition","tooth_id":"45","condition_code":"JC","box_key":"T-73-center","color":"blue","case_type":"permanent"},{"type":"condition","tooth_id":"11","condition_code":"JC","box_key":"R3-10","color":"blue","case_type":"permanent"},{"type":"treatment","tooth_id":"11","treatment_code":"PFS","box_key":"R4-10","color":"","case_type":"permanent"}]}
2026-01-13 21:22:45 - Parsed input: Array
(
    [action] => save
    [patient_id] => 16
    [visit_id] => 0
    [visit_date] => 2026-01-13
    [oral_data] => Array
        (
            [0] => Array
                (
                    [type] => condition
                    [tooth_id] => 45
                    [condition_code] => JC
                    [box_key] => T-73-center
                    [color] => blue
                    [case_type] => permanent
                )

            [1] => Array
                (
                    [type] => condition
                    [tooth_id] => 11
                    [condition_code] => JC
                    [box_key] => R3-10
                    [color] => blue
                    [case_type] => permanent
                )

            [2] => Array
                (
                    [type] => treatment
                    [tooth_id] => 11
                    [treatment_code] => PFS
                    [box_key] => R4-10
                    [color] => 
                    [case_type] => permanent
                )

        )

)

2026-01-13 21:22:45 - Starting transaction
2026-01-13 21:22:45 - Created new visit_id: 26 for patient: 16 with date: 2026-01-13
2026-01-13 21:22:45 - Processing item 0: Array
(
    [type] => condition
    [tooth_id] => 45
    [condition_code] => JC
    [box_key] => T-73-center
    [color] => blue
    [case_type] => permanent
)

2026-01-13 21:22:45 - Resolving tooth_id for: '45'
2026-01-13 21:22:45 - Found tooth by tooth_id: 45 => 45
2026-01-13 21:22:45 - Item details: type=condition, tooth=45, box=T-73-center
2026-01-13 21:22:45 - Processing condition: 'JC', caseType: permanent
2026-01-13 21:22:45 - Looking for condition: 'JC', caseType: permanent, isPermanent: 1
2026-01-13 21:22:45 - Found condition_id: 14 for 'JC' in column code
2026-01-13 21:22:45 - Inserting condition: visit_id=26, tooth_id=45, condition_id=14, box_key='T-73-center', color='blue', case_type='permanent'
2026-01-13 21:22:45 - Condition inserted successfully
2026-01-13 21:22:45 - Processing item 1: Array
(
    [type] => condition
    [tooth_id] => 11
    [condition_code] => JC
    [box_key] => R3-10
    [color] => blue
    [case_type] => permanent
)

2026-01-13 21:22:45 - Resolving tooth_id for: '11'
2026-01-13 21:22:45 - Found tooth by tooth_id: 11 => 11
2026-01-13 21:22:45 - Item details: type=condition, tooth=11, box=R3-10
2026-01-13 21:22:45 - Processing condition: 'JC', caseType: permanent
2026-01-13 21:22:45 - Looking for condition: 'JC', caseType: permanent, isPermanent: 1
2026-01-13 21:22:45 - Found condition_id: 14 for 'JC' in column code
2026-01-13 21:22:45 - Inserting condition: visit_id=26, tooth_id=11, condition_id=14, box_key='R3-10', color='blue', case_type='permanent'
2026-01-13 21:22:45 - Condition inserted successfully
2026-01-13 21:22:45 - Processing item 2: Array
(
    [type] => treatment
    [tooth_id] => 11
    [treatment_code] => PFS
    [box_key] => R4-10
    [color] => 
    [case_type] => permanent
)

2026-01-13 21:22:45 - Resolving tooth_id for: '11'
2026-01-13 21:22:45 - Found tooth by tooth_id: 11 => 11
2026-01-13 21:22:45 - Item details: type=treatment, tooth=11, box=R4-10
2026-01-13 21:22:45 - Processing treatment: 'PFS'
2026-01-13 21:22:45 - Looking for treatment: 'PFS'
2026-01-13 21:22:45 - Found treatment_id: 10 for 'PFS'
2026-01-13 21:22:45 - Inserting treatment: visit_id=26, tooth_id=11, treatment_id=10, box_key='R4-10', color='', case_type='permanent'
2026-01-13 21:22:45 - Treatment inserted successfully
2026-01-13 21:22:45 - Transaction committed successfully. Inserted: 3 items
2026-01-13 21:22:45 - Sending response: {"success":true,"visit_id":"26","inserted":3,"conditions_count":2,"treatments_count":1,"warnings":[],"logged_by":null}
2026-01-13 21:34:03 - Received save request: {"action":"save","patient_id":"16","visit_id":"0","visit_date":"2026-01-13","oral_data":[{"type":"condition","tooth_id":"45","condition_code":"F","box_key":"T-73-center","color":"red","case_type":"permanent"},{"type":"condition","tooth_id":"11","condition_code":"F","box_key":"R3-10","color":"red","case_type":"permanent"},{"type":"treatment","tooth_id":"11","treatment_code":"FG","box_key":"R4-10","color":"","case_type":"permanent"}],"user_id":1,"user_type":"Dentist","user_name":"Dr. Leonardo Vinci"}
2026-01-13 21:34:03 - Parsed input: Array
(
    [action] => save
    [patient_id] => 16
    [visit_id] => 0
    [visit_date] => 2026-01-13
    [oral_data] => Array
        (
            [0] => Array
                (
                    [type] => condition
                    [tooth_id] => 45
                    [condition_code] => F
                    [box_key] => T-73-center
                    [color] => red
                    [case_type] => permanent
                )

            [1] => Array
                (
                    [type] => condition
                    [tooth_id] => 11
                    [condition_code] => F
                    [box_key] => R3-10
                    [color] => red
                    [case_type] => permanent
                )

            [2] => Array
                (
                    [type] => treatment
                    [tooth_id] => 11
                    [treatment_code] => FG
                    [box_key] => R4-10
                    [color] => 
                    [case_type] => permanent
                )

        )

    [user_id] => 1
    [user_type] => Dentist
    [user_name] => Dr. Leonardo Vinci
)

2026-01-13 21:34:03 - Starting transaction
2026-01-13 21:34:03 - Created new visit_id: 27 for patient: 16 with date: 2026-01-13
2026-01-13 21:34:03 - Processing item 0: Array
(
    [type] => condition
    [tooth_id] => 45
    [condition_code] => F
    [box_key] => T-73-center
    [color] => red
    [case_type] => permanent
)

2026-01-13 21:34:03 - Resolving tooth_id for: '45'
2026-01-13 21:34:03 - Found tooth by tooth_id: 45 => 45
2026-01-13 21:34:03 - Item details: type=condition, tooth=45, box=T-73-center
2026-01-13 21:34:03 - Processing condition: 'F', caseType: permanent
2026-01-13 21:34:03 - Looking for condition: 'F', caseType: permanent, isPermanent: 1
2026-01-13 21:34:03 - Found condition_id: 4 for 'F' in column code
2026-01-13 21:34:03 - Inserting condition: visit_id=27, tooth_id=45, condition_id=4, box_key='T-73-center', color='red', case_type='permanent'
2026-01-13 21:34:03 - Condition inserted successfully
2026-01-13 21:34:03 - Processing item 1: Array
(
    [type] => condition
    [tooth_id] => 11
    [condition_code] => F
    [box_key] => R3-10
    [color] => red
    [case_type] => permanent
)

2026-01-13 21:34:03 - Resolving tooth_id for: '11'
2026-01-13 21:34:03 - Found tooth by tooth_id: 11 => 11
2026-01-13 21:34:03 - Item details: type=condition, tooth=11, box=R3-10
2026-01-13 21:34:03 - Processing condition: 'F', caseType: permanent
2026-01-13 21:34:03 - Looking for condition: 'F', caseType: permanent, isPermanent: 1
2026-01-13 21:34:03 - Found condition_id: 4 for 'F' in column code
2026-01-13 21:34:03 - Inserting condition: visit_id=27, tooth_id=11, condition_id=4, box_key='R3-10', color='red', case_type='permanent'
2026-01-13 21:34:03 - Condition inserted successfully
2026-01-13 21:34:03 - Processing item 2: Array
(
    [type] => treatment
    [tooth_id] => 11
    [treatment_code] => FG
    [box_key] => R4-10
    [color] => 
    [case_type] => permanent
)

2026-01-13 21:34:03 - Resolving tooth_id for: '11'
2026-01-13 21:34:03 - Found tooth by tooth_id: 11 => 11
2026-01-13 21:34:03 - Item details: type=treatment, tooth=11, box=R4-10
2026-01-13 21:34:03 - Processing treatment: 'FG'
2026-01-13 21:34:03 - Looking for treatment: 'FG'
2026-01-13 21:34:03 - Found treatment_id: 9 for 'FG'
2026-01-13 21:34:03 - Inserting treatment: visit_id=27, tooth_id=11, treatment_id=9, box_key='R4-10', color='', case_type='permanent'
2026-01-13 21:34:03 - Treatment inserted successfully
2026-01-13 21:34:03 - Transaction committed successfully. Inserted: 3 items
2026-01-13 21:34:03 - Sending response: {"success":true,"visit_id":"27","inserted":3,"conditions_count":2,"treatments_count":1,"warnings":[],"logged_by":{"id":1,"type":"Dentist","name":"Dr. Leonardo Vinci"}}
2026-01-13 21:34:10 - Received save request: {"action":"save","patient_id":"16","visit_id":"0","visit_date":"2026-01-13","oral_data":[{"type":"condition","tooth_id":"45","condition_code":"F","box_key":"T-73-center","color":"red","case_type":"permanent"},{"type":"condition","tooth_id":"11","condition_code":"F","box_key":"R3-10","color":"red","case_type":"permanent"},{"type":"treatment","tooth_id":"11","treatment_code":"FG","box_key":"R4-10","color":"","case_type":"permanent"}],"user_id":1,"user_type":"Dentist","user_name":"Dr. Leonardo Vinci"}
2026-01-13 21:34:10 - Parsed input: Array
(
    [action] => save
    [patient_id] => 16
    [visit_id] => 0
    [visit_date] => 2026-01-13
    [oral_data] => Array
        (
            [0] => Array
                (
                    [type] => condition
                    [tooth_id] => 45
                    [condition_code] => F
                    [box_key] => T-73-center
                    [color] => red
                    [case_type] => permanent
                )

            [1] => Array
                (
                    [type] => condition
                    [tooth_id] => 11
                    [condition_code] => F
                    [box_key] => R3-10
                    [color] => red
                    [case_type] => permanent
                )

            [2] => Array
                (
                    [type] => treatment
                    [tooth_id] => 11
                    [treatment_code] => FG
                    [box_key] => R4-10
                    [color] => 
                    [case_type] => permanent
                )

        )

    [user_id] => 1
    [user_type] => Dentist
    [user_name] => Dr. Leonardo Vinci
)

2026-01-13 21:34:10 - Starting transaction
2026-01-13 21:34:10 - Created new visit_id: 28 for patient: 16 with date: 2026-01-13
2026-01-13 21:34:10 - Processing item 0: Array
(
    [type] => condition
    [tooth_id] => 45
    [condition_code] => F
    [box_key] => T-73-center
    [color] => red
    [case_type] => permanent
)

2026-01-13 21:34:10 - Resolving tooth_id for: '45'
2026-01-13 21:34:10 - Found tooth by tooth_id: 45 => 45
2026-01-13 21:34:10 - Item details: type=condition, tooth=45, box=T-73-center
2026-01-13 21:34:10 - Processing condition: 'F', caseType: permanent
2026-01-13 21:34:10 - Looking for condition: 'F', caseType: permanent, isPermanent: 1
2026-01-13 21:34:10 - Found condition_id: 4 for 'F' in column code
2026-01-13 21:34:10 - Inserting condition: visit_id=28, tooth_id=45, condition_id=4, box_key='T-73-center', color='red', case_type='permanent'
2026-01-13 21:34:10 - Condition inserted successfully
2026-01-13 21:34:10 - Processing item 1: Array
(
    [type] => condition
    [tooth_id] => 11
    [condition_code] => F
    [box_key] => R3-10
    [color] => red
    [case_type] => permanent
)

2026-01-13 21:34:10 - Resolving tooth_id for: '11'
2026-01-13 21:34:10 - Found tooth by tooth_id: 11 => 11
2026-01-13 21:34:10 - Item details: type=condition, tooth=11, box=R3-10
2026-01-13 21:34:10 - Processing condition: 'F', caseType: permanent
2026-01-13 21:34:10 - Looking for condition: 'F', caseType: permanent, isPermanent: 1
2026-01-13 21:34:10 - Found condition_id: 4 for 'F' in column code
2026-01-13 21:34:11 - Inserting condition: visit_id=28, tooth_id=11, condition_id=4, box_key='R3-10', color='red', case_type='permanent'
2026-01-13 21:34:11 - Condition inserted successfully
2026-01-13 21:34:11 - Processing item 2: Array
(
    [type] => treatment
    [tooth_id] => 11
    [treatment_code] => FG
    [box_key] => R4-10
    [color] => 
    [case_type] => permanent
)

2026-01-13 21:34:11 - Resolving tooth_id for: '11'
2026-01-13 21:34:11 - Found tooth by tooth_id: 11 => 11
2026-01-13 21:34:11 - Item details: type=treatment, tooth=11, box=R4-10
2026-01-13 21:34:11 - Processing treatment: 'FG'
2026-01-13 21:34:11 - Looking for treatment: 'FG'
2026-01-13 21:34:11 - Found treatment_id: 9 for 'FG'
2026-01-13 21:34:11 - Inserting treatment: visit_id=28, tooth_id=11, treatment_id=9, box_key='R4-10', color='', case_type='permanent'
2026-01-13 21:34:11 - Treatment inserted successfully
2026-01-13 21:34:11 - Transaction committed successfully. Inserted: 3 items
2026-01-13 21:34:11 - Sending response: {"success":true,"visit_id":"28","inserted":3,"conditions_count":2,"treatments_count":1,"warnings":[],"logged_by":{"id":1,"type":"Dentist","name":"Dr. Leonardo Vinci"}}
2026-01-13 21:35:30 - Received save request: {"action":"save","patient_id":"14","visit_id":"0","visit_date":"2026-01-13","oral_data":[{"type":"condition","tooth_id":"46","condition_code":"M","box_key":"T-74-center","color":"red","case_type":"permanent"},{"type":"condition","tooth_id":"12","condition_code":"M","box_key":"R3-11","color":"red","case_type":"permanent"},{"type":"treatment","tooth_id":"12","treatment_code":"TF","box_key":"R4-11","color":"","case_type":"permanent"}]}
2026-01-13 21:35:30 - Parsed input: Array
(
    [action] => save
    [patient_id] => 14
    [visit_id] => 0
    [visit_date] => 2026-01-13
    [oral_data] => Array
        (
            [0] => Array
                (
                    [type] => condition
                    [tooth_id] => 46
                    [condition_code] => M
                    [box_key] => T-74-center
                    [color] => red
                    [case_type] => permanent
                )

            [1] => Array
                (
                    [type] => condition
                    [tooth_id] => 12
                    [condition_code] => M
                    [box_key] => R3-11
                    [color] => red
                    [case_type] => permanent
                )

            [2] => Array
                (
                    [type] => treatment
                    [tooth_id] => 12
                    [treatment_code] => TF
                    [box_key] => R4-11
                    [color] => 
                    [case_type] => permanent
                )

        )

)

2026-01-13 21:35:30 - Starting transaction
2026-01-13 21:35:30 - Created new visit_id: 29 for patient: 14 with date: 2026-01-13
2026-01-13 21:35:30 - Processing item 0: Array
(
    [type] => condition
    [tooth_id] => 46
    [condition_code] => M
    [box_key] => T-74-center
    [color] => red
    [case_type] => permanent
)

2026-01-13 21:35:30 - Resolving tooth_id for: '46'
2026-01-13 21:35:30 - Found tooth by tooth_id: 46 => 46
2026-01-13 21:35:30 - Item details: type=condition, tooth=46, box=T-74-center
2026-01-13 21:35:30 - Processing condition: 'M', caseType: permanent
2026-01-13 21:35:30 - Looking for condition: 'M', caseType: permanent, isPermanent: 1
2026-01-13 21:35:30 - Found condition_id: 6 for 'M' in column code
2026-01-13 21:35:30 - Inserting condition: visit_id=29, tooth_id=46, condition_id=6, box_key='T-74-center', color='red', case_type='permanent'
2026-01-13 21:35:30 - Condition inserted successfully
2026-01-13 21:35:30 - Processing item 1: Array
(
    [type] => condition
    [tooth_id] => 12
    [condition_code] => M
    [box_key] => R3-11
    [color] => red
    [case_type] => permanent
)

2026-01-13 21:35:30 - Resolving tooth_id for: '12'
2026-01-13 21:35:30 - Found tooth by tooth_id: 12 => 12
2026-01-13 21:35:30 - Item details: type=condition, tooth=12, box=R3-11
2026-01-13 21:35:30 - Processing condition: 'M', caseType: permanent
2026-01-13 21:35:30 - Looking for condition: 'M', caseType: permanent, isPermanent: 1
2026-01-13 21:35:30 - Found condition_id: 6 for 'M' in column code
2026-01-13 21:35:30 - Inserting condition: visit_id=29, tooth_id=12, condition_id=6, box_key='R3-11', color='red', case_type='permanent'
2026-01-13 21:35:30 - Condition inserted successfully
2026-01-13 21:35:30 - Processing item 2: Array
(
    [type] => treatment
    [tooth_id] => 12
    [treatment_code] => TF
    [box_key] => R4-11
    [color] => 
    [case_type] => permanent
)

2026-01-13 21:35:30 - Resolving tooth_id for: '12'
2026-01-13 21:35:30 - Found tooth by tooth_id: 12 => 12
2026-01-13 21:35:30 - Item details: type=treatment, tooth=12, box=R4-11
2026-01-13 21:35:30 - Processing treatment: 'TF'
2026-01-13 21:35:30 - Looking for treatment: 'TF'
2026-01-13 21:35:30 - Found treatment_id: 12 for 'TF'
2026-01-13 21:35:30 - Inserting treatment: visit_id=29, tooth_id=12, treatment_id=12, box_key='R4-11', color='', case_type='permanent'
2026-01-13 21:35:30 - Treatment inserted successfully
2026-01-13 21:35:30 - Transaction committed successfully. Inserted: 3 items
2026-01-13 21:35:30 - Sending response: {"success":true,"visit_id":"29","inserted":3,"conditions_count":2,"treatments_count":1,"warnings":[],"logged_by":null}
2026-01-13 21:40:50 - Received save request: {"action":"save","patient_id":"18","visit_id":"0","visit_date":"2026-01-13","oral_data":[{"type":"condition","tooth_id":"43","condition_code":"F","box_key":"T-71-center","color":"blue","case_type":"permanent"},{"type":"condition","tooth_id":"9","condition_code":"F","box_key":"R3-8","color":"blue","case_type":"permanent"},{"type":"treatment","tooth_id":"9","treatment_code":"FV","box_key":"R4-8","color":"","case_type":"permanent"}],"user_id":1,"user_type":"Dentist","user_name":"Dr. Leonardo Vinci"}
2026-01-13 21:40:50 - Parsed input: Array
(
    [action] => save
    [patient_id] => 18
    [visit_id] => 0
    [visit_date] => 2026-01-13
    [oral_data] => Array
        (
            [0] => Array
                (
                    [type] => condition
                    [tooth_id] => 43
                    [condition_code] => F
                    [box_key] => T-71-center
                    [color] => blue
                    [case_type] => permanent
                )

            [1] => Array
                (
                    [type] => condition
                    [tooth_id] => 9
                    [condition_code] => F
                    [box_key] => R3-8
                    [color] => blue
                    [case_type] => permanent
                )

            [2] => Array
                (
                    [type] => treatment
                    [tooth_id] => 9
                    [treatment_code] => FV
                    [box_key] => R4-8
                    [color] => 
                    [case_type] => permanent
                )

        )

    [user_id] => 1
    [user_type] => Dentist
    [user_name] => Dr. Leonardo Vinci
)

2026-01-13 21:40:50 - Starting transaction
2026-01-13 21:40:50 - Created new visit_id: 30 for patient: 18 with date: 2026-01-13
2026-01-13 21:40:50 - Processing item 0: Array
(
    [type] => condition
    [tooth_id] => 43
    [condition_code] => F
    [box_key] => T-71-center
    [color] => blue
    [case_type] => permanent
)

2026-01-13 21:40:50 - Resolving tooth_id for: '43'
2026-01-13 21:40:50 - Found tooth by tooth_id: 43 => 43
2026-01-13 21:40:50 - Item details: type=condition, tooth=43, box=T-71-center
2026-01-13 21:40:50 - Processing condition: 'F', caseType: permanent
2026-01-13 21:40:50 - Looking for condition: 'F', caseType: permanent, isPermanent: 1
2026-01-13 21:40:50 - Found condition_id: 4 for 'F' in column code
2026-01-13 21:40:50 - Inserting condition: visit_id=30, tooth_id=43, condition_id=4, box_key='T-71-center', color='blue', case_type='permanent'
2026-01-13 21:40:50 - Condition inserted successfully
2026-01-13 21:40:50 - Processing item 1: Array
(
    [type] => condition
    [tooth_id] => 9
    [condition_code] => F
    [box_key] => R3-8
    [color] => blue
    [case_type] => permanent
)

2026-01-13 21:40:50 - Resolving tooth_id for: '9'
2026-01-13 21:40:50 - Found tooth by tooth_id: 9 => 9
2026-01-13 21:40:50 - Item details: type=condition, tooth=9, box=R3-8
2026-01-13 21:40:50 - Processing condition: 'F', caseType: permanent
2026-01-13 21:40:50 - Looking for condition: 'F', caseType: permanent, isPermanent: 1
2026-01-13 21:40:50 - Found condition_id: 4 for 'F' in column code
2026-01-13 21:40:50 - Inserting condition: visit_id=30, tooth_id=9, condition_id=4, box_key='R3-8', color='blue', case_type='permanent'
2026-01-13 21:40:50 - Condition inserted successfully
2026-01-13 21:40:50 - Processing item 2: Array
(
    [type] => treatment
    [tooth_id] => 9
    [treatment_code] => FV
    [box_key] => R4-8
    [color] => 
    [case_type] => permanent
)

2026-01-13 21:40:50 - Resolving tooth_id for: '9'
2026-01-13 21:40:50 - Found tooth by tooth_id: 9 => 9
2026-01-13 21:40:50 - Item details: type=treatment, tooth=9, box=R4-8
2026-01-13 21:40:50 - Processing treatment: 'FV'
2026-01-13 21:40:50 - Looking for treatment: 'FV'
2026-01-13 21:40:50 - Found treatment_id: 8 for 'FV'
2026-01-13 21:40:50 - Inserting treatment: visit_id=30, tooth_id=9, treatment_id=8, box_key='R4-8', color='', case_type='permanent'
2026-01-13 21:40:50 - Treatment inserted successfully
2026-01-13 21:40:50 - Transaction committed successfully. Inserted: 3 items
2026-01-13 21:40:50 - Sending response: {"success":true,"visit_id":"30","inserted":3,"conditions_count":2,"treatments_count":1,"warnings":[],"logged_by":{"id":1,"type":"Dentist","name":"Dr. Leonardo Vinci"}}
2026-01-13 21:42:11 - Received save request: {"action":"save","patient_id":"18","visit_id":"0","visit_date":"2026-01-13","oral_data":[{"type":"condition","tooth_id":"44","condition_code":"S","box_key":"T-72-center","color":"red","case_type":"permanent"},{"type":"condition","tooth_id":"10","condition_code":"S","box_key":"R3-9","color":"red","case_type":"permanent"},{"type":"treatment","tooth_id":"10","treatment_code":"FG","box_key":"R4-9","color":"","case_type":"permanent"}]}
2026-01-13 21:42:11 - Parsed input: Array
(
    [action] => save
    [patient_id] => 18
    [visit_id] => 0
    [visit_date] => 2026-01-13
    [oral_data] => Array
        (
            [0] => Array
                (
                    [type] => condition
                    [tooth_id] => 44
                    [condition_code] => S
                    [box_key] => T-72-center
                    [color] => red
                    [case_type] => permanent
                )

            [1] => Array
                (
                    [type] => condition
                    [tooth_id] => 10
                    [condition_code] => S
                    [box_key] => R3-9
                    [color] => red
                    [case_type] => permanent
                )

            [2] => Array
                (
                    [type] => treatment
                    [tooth_id] => 10
                    [treatment_code] => FG
                    [box_key] => R4-9
                    [color] => 
                    [case_type] => permanent
                )

        )

)

2026-01-13 21:42:11 - Starting transaction
2026-01-13 21:42:11 - Created new visit_id: 31 for patient: 18 with date: 2026-01-13
2026-01-13 21:42:11 - Processing item 0: Array
(
    [type] => condition
    [tooth_id] => 44
    [condition_code] => S
    [box_key] => T-72-center
    [color] => red
    [case_type] => permanent
)

2026-01-13 21:42:11 - Resolving tooth_id for: '44'
2026-01-13 21:42:11 - Found tooth by tooth_id: 44 => 44
2026-01-13 21:42:11 - Item details: type=condition, tooth=44, box=T-72-center
2026-01-13 21:42:11 - Processing condition: 'S', caseType: permanent
2026-01-13 21:42:11 - Looking for condition: 'S', caseType: permanent, isPermanent: 1
2026-01-13 21:42:11 - Found condition_id: 12 for 'S' in column code
2026-01-13 21:42:11 - Inserting condition: visit_id=31, tooth_id=44, condition_id=12, box_key='T-72-center', color='red', case_type='permanent'
2026-01-13 21:42:11 - Condition inserted successfully
2026-01-13 21:42:11 - Processing item 1: Array
(
    [type] => condition
    [tooth_id] => 10
    [condition_code] => S
    [box_key] => R3-9
    [color] => red
    [case_type] => permanent
)

2026-01-13 21:42:11 - Resolving tooth_id for: '10'
2026-01-13 21:42:11 - Found tooth by tooth_id: 10 => 10
2026-01-13 21:42:11 - Item details: type=condition, tooth=10, box=R3-9
2026-01-13 21:42:11 - Processing condition: 'S', caseType: permanent
2026-01-13 21:42:11 - Looking for condition: 'S', caseType: permanent, isPermanent: 1
2026-01-13 21:42:11 - Found condition_id: 12 for 'S' in column code
2026-01-13 21:42:11 - Inserting condition: visit_id=31, tooth_id=10, condition_id=12, box_key='R3-9', color='red', case_type='permanent'
2026-01-13 21:42:11 - Condition inserted successfully
2026-01-13 21:42:11 - Processing item 2: Array
(
    [type] => treatment
    [tooth_id] => 10
    [treatment_code] => FG
    [box_key] => R4-9
    [color] => 
    [case_type] => permanent
)

2026-01-13 21:42:11 - Resolving tooth_id for: '10'
2026-01-13 21:42:11 - Found tooth by tooth_id: 10 => 10
2026-01-13 21:42:11 - Item details: type=treatment, tooth=10, box=R4-9
2026-01-13 21:42:11 - Processing treatment: 'FG'
2026-01-13 21:42:11 - Looking for treatment: 'FG'
2026-01-13 21:42:11 - Found treatment_id: 9 for 'FG'
2026-01-13 21:42:11 - Inserting treatment: visit_id=31, tooth_id=10, treatment_id=9, box_key='R4-9', color='', case_type='permanent'
2026-01-13 21:42:11 - Treatment inserted successfully
2026-01-13 21:42:11 - Transaction committed successfully. Inserted: 3 items
2026-01-13 21:42:11 - Sending response: {"success":true,"visit_id":"31","inserted":3,"conditions_count":2,"treatments_count":1,"warnings":[],"logged_by":null}
2026-01-13 21:42:50 - Received save request: {"action":"save","patient_id":"18","visit_id":"0","visit_date":"2026-01-13","oral_data":[{"type":"condition","tooth_id":"47","condition_code":"S","box_key":"T-75-center","color":"red","case_type":"temporary"},{"type":"condition","tooth_id":"13","condition_code":"S","box_key":"R3-12","color":"red","case_type":"temporary"},{"type":"treatment","tooth_id":"13","treatment_code":"FG","box_key":"R4-12","color":"","case_type":"permanent"}]}
2026-01-13 21:42:50 - Parsed input: Array
(
    [action] => save
    [patient_id] => 18
    [visit_id] => 0
    [visit_date] => 2026-01-13
    [oral_data] => Array
        (
            [0] => Array
                (
                    [type] => condition
                    [tooth_id] => 47
                    [condition_code] => S
                    [box_key] => T-75-center
                    [color] => red
                    [case_type] => temporary
                )

            [1] => Array
                (
                    [type] => condition
                    [tooth_id] => 13
                    [condition_code] => S
                    [box_key] => R3-12
                    [color] => red
                    [case_type] => temporary
                )

            [2] => Array
                (
                    [type] => treatment
                    [tooth_id] => 13
                    [treatment_code] => FG
                    [box_key] => R4-12
                    [color] => 
                    [case_type] => permanent
                )

        )

)

2026-01-13 21:42:50 - Starting transaction
2026-01-13 21:42:50 - Created new visit_id: 32 for patient: 18 with date: 2026-01-13
2026-01-13 21:42:50 - Processing item 0: Array
(
    [type] => condition
    [tooth_id] => 47
    [condition_code] => S
    [box_key] => T-75-center
    [color] => red
    [case_type] => temporary
)

2026-01-13 21:42:50 - Resolving tooth_id for: '47'
2026-01-13 21:42:50 - Found tooth by tooth_id: 47 => 47
2026-01-13 21:42:50 - Item details: type=condition, tooth=47, box=T-75-center
2026-01-13 21:42:50 - Processing condition: 'S', caseType: temporary
2026-01-13 21:42:50 - Looking for condition: 'S', caseType: temporary, isPermanent: 0
2026-01-13 21:42:50 - Found condition_id: 13 for 'S' in column code
2026-01-13 21:42:50 - Inserting condition: visit_id=32, tooth_id=47, condition_id=13, box_key='T-75-center', color='red', case_type='temporary'
2026-01-13 21:42:50 - Condition inserted successfully
2026-01-13 21:42:50 - Processing item 1: Array
(
    [type] => condition
    [tooth_id] => 13
    [condition_code] => S
    [box_key] => R3-12
    [color] => red
    [case_type] => temporary
)

2026-01-13 21:42:50 - Resolving tooth_id for: '13'
2026-01-13 21:42:50 - Found tooth by tooth_id: 13 => 13
2026-01-13 21:42:50 - Item details: type=condition, tooth=13, box=R3-12
2026-01-13 21:42:50 - Processing condition: 'S', caseType: temporary
2026-01-13 21:42:50 - Looking for condition: 'S', caseType: temporary, isPermanent: 0
2026-01-13 21:42:50 - Found condition_id: 13 for 'S' in column code
2026-01-13 21:42:50 - Inserting condition: visit_id=32, tooth_id=13, condition_id=13, box_key='R3-12', color='red', case_type='temporary'
2026-01-13 21:42:50 - Condition inserted successfully
2026-01-13 21:42:50 - Processing item 2: Array
(
    [type] => treatment
    [tooth_id] => 13
    [treatment_code] => FG
    [box_key] => R4-12
    [color] => 
    [case_type] => permanent
)

2026-01-13 21:42:50 - Resolving tooth_id for: '13'
2026-01-13 21:42:50 - Found tooth by tooth_id: 13 => 13
2026-01-13 21:42:50 - Item details: type=treatment, tooth=13, box=R4-12
2026-01-13 21:42:50 - Processing treatment: 'FG'
2026-01-13 21:42:50 - Looking for treatment: 'FG'
2026-01-13 21:42:50 - Found treatment_id: 9 for 'FG'
2026-01-13 21:42:50 - Inserting treatment: visit_id=32, tooth_id=13, treatment_id=9, box_key='R4-12', color='', case_type='permanent'
2026-01-13 21:42:50 - Treatment inserted successfully
2026-01-13 21:42:50 - Transaction committed successfully. Inserted: 3 items
2026-01-13 21:42:50 - Sending response: {"success":true,"visit_id":"32","inserted":3,"conditions_count":2,"treatments_count":1,"warnings":[],"logged_by":null}
2026-01-13 21:43:25 - Received save request: {"action":"save","patient_id":"18","visit_id":"0","visit_date":"2026-01-13","oral_data":[{"type":"condition","tooth_id":"45","condition_code":"P","box_key":"T-73-center","color":"red","case_type":"permanent"},{"type":"condition","tooth_id":"11","condition_code":"P","box_key":"R3-10","color":"red","case_type":"permanent"},{"type":"treatment","tooth_id":"11","treatment_code":"FV","box_key":"R4-10","color":"","case_type":"permanent"}]}
2026-01-13 21:43:25 - Parsed input: Array
(
    [action] => save
    [patient_id] => 18
    [visit_id] => 0
    [visit_date] => 2026-01-13
    [oral_data] => Array
        (
            [0] => Array
                (
                    [type] => condition
                    [tooth_id] => 45
                    [condition_code] => P
                    [box_key] => T-73-center
                    [color] => red
                    [case_type] => permanent
                )

            [1] => Array
                (
                    [type] => condition
                    [tooth_id] => 11
                    [condition_code] => P
                    [box_key] => R3-10
                    [color] => red
                    [case_type] => permanent
                )

            [2] => Array
                (
                    [type] => treatment
                    [tooth_id] => 11
                    [treatment_code] => FV
                    [box_key] => R4-10
                    [color] => 
                    [case_type] => permanent
                )

        )

)

2026-01-13 21:43:25 - Starting transaction
2026-01-13 21:43:25 - Created new visit_id: 33 for patient: 18 with date: 2026-01-13
2026-01-13 21:43:25 - Processing item 0: Array
(
    [type] => condition
    [tooth_id] => 45
    [condition_code] => P
    [box_key] => T-73-center
    [color] => red
    [case_type] => permanent
)

2026-01-13 21:43:25 - Resolving tooth_id for: '45'
2026-01-13 21:43:25 - Found tooth by tooth_id: 45 => 45
2026-01-13 21:43:25 - Item details: type=condition, tooth=45, box=T-73-center
2026-01-13 21:43:25 - Processing condition: 'P', caseType: permanent
2026-01-13 21:43:25 - Looking for condition: 'P', caseType: permanent, isPermanent: 1
2026-01-13 21:43:25 - Found condition_id: 16 for 'P' in column code
2026-01-13 21:43:25 - Inserting condition: visit_id=33, tooth_id=45, condition_id=16, box_key='T-73-center', color='red', case_type='permanent'
2026-01-13 21:43:25 - Condition inserted successfully
2026-01-13 21:43:25 - Processing item 1: Array
(
    [type] => condition
    [tooth_id] => 11
    [condition_code] => P
    [box_key] => R3-10
    [color] => red
    [case_type] => permanent
)

2026-01-13 21:43:25 - Resolving tooth_id for: '11'
2026-01-13 21:43:25 - Found tooth by tooth_id: 11 => 11
2026-01-13 21:43:25 - Item details: type=condition, tooth=11, box=R3-10
2026-01-13 21:43:25 - Processing condition: 'P', caseType: permanent
2026-01-13 21:43:25 - Looking for condition: 'P', caseType: permanent, isPermanent: 1
2026-01-13 21:43:25 - Found condition_id: 16 for 'P' in column code
2026-01-13 21:43:25 - Inserting condition: visit_id=33, tooth_id=11, condition_id=16, box_key='R3-10', color='red', case_type='permanent'
2026-01-13 21:43:25 - Condition inserted successfully
2026-01-13 21:43:25 - Processing item 2: Array
(
    [type] => treatment
    [tooth_id] => 11
    [treatment_code] => FV
    [box_key] => R4-10
    [color] => 
    [case_type] => permanent
)

2026-01-13 21:43:25 - Resolving tooth_id for: '11'
2026-01-13 21:43:25 - Found tooth by tooth_id: 11 => 11
2026-01-13 21:43:25 - Item details: type=treatment, tooth=11, box=R4-10
2026-01-13 21:43:25 - Processing treatment: 'FV'
2026-01-13 21:43:25 - Looking for treatment: 'FV'
2026-01-13 21:43:25 - Found treatment_id: 8 for 'FV'
2026-01-13 21:43:25 - Inserting treatment: visit_id=33, tooth_id=11, treatment_id=8, box_key='R4-10', color='', case_type='permanent'
2026-01-13 21:43:25 - Treatment inserted successfully
2026-01-13 21:43:25 - Transaction committed successfully. Inserted: 3 items
2026-01-13 21:43:25 - Sending response: {"success":true,"visit_id":"33","inserted":3,"conditions_count":2,"treatments_count":1,"warnings":[],"logged_by":null}
2026-01-13 21:46:06 - Received save request: {"action":"save","patient_id":"8","visit_id":"0","visit_date":"2026-01-13","oral_data":[{"type":"condition","tooth_id":"45","condition_code":"P","box_key":"T-73-center","color":"blue","case_type":"permanent"},{"type":"condition","tooth_id":"11","condition_code":"P","box_key":"R3-10","color":"blue","case_type":"permanent"},{"type":"treatment","tooth_id":"11","treatment_code":"FV","box_key":"R4-10","color":"","case_type":"permanent"}]}
2026-01-13 21:46:06 - Parsed input: Array
(
    [action] => save
    [patient_id] => 8
    [visit_id] => 0
    [visit_date] => 2026-01-13
    [oral_data] => Array
        (
            [0] => Array
                (
                    [type] => condition
                    [tooth_id] => 45
                    [condition_code] => P
                    [box_key] => T-73-center
                    [color] => blue
                    [case_type] => permanent
                )

            [1] => Array
                (
                    [type] => condition
                    [tooth_id] => 11
                    [condition_code] => P
                    [box_key] => R3-10
                    [color] => blue
                    [case_type] => permanent
                )

            [2] => Array
                (
                    [type] => treatment
                    [tooth_id] => 11
                    [treatment_code] => FV
                    [box_key] => R4-10
                    [color] => 
                    [case_type] => permanent
                )

        )

)

2026-01-13 21:46:06 - Starting transaction
2026-01-13 21:46:06 - Created new visit_id: 34 for patient: 8 with date: 2026-01-13
2026-01-13 21:46:06 - Processing item 0: Array
(
    [type] => condition
    [tooth_id] => 45
    [condition_code] => P
    [box_key] => T-73-center
    [color] => blue
    [case_type] => permanent
)

2026-01-13 21:46:06 - Resolving tooth_id for: '45'
2026-01-13 21:46:06 - Found tooth by tooth_id: 45 => 45
2026-01-13 21:46:06 - Item details: type=condition, tooth=45, box=T-73-center
2026-01-13 21:46:06 - Processing condition: 'P', caseType: permanent
2026-01-13 21:46:06 - Looking for condition: 'P', caseType: permanent, isPermanent: 1
2026-01-13 21:46:06 - Found condition_id: 16 for 'P' in column code
2026-01-13 21:46:06 - Inserting condition: visit_id=34, tooth_id=45, condition_id=16, box_key='T-73-center', color='blue', case_type='permanent'
2026-01-13 21:46:06 - Condition inserted successfully
2026-01-13 21:46:06 - Processing item 1: Array
(
    [type] => condition
    [tooth_id] => 11
    [condition_code] => P
    [box_key] => R3-10
    [color] => blue
    [case_type] => permanent
)

2026-01-13 21:46:06 - Resolving tooth_id for: '11'
2026-01-13 21:46:06 - Found tooth by tooth_id: 11 => 11
2026-01-13 21:46:06 - Item details: type=condition, tooth=11, box=R3-10
2026-01-13 21:46:06 - Processing condition: 'P', caseType: permanent
2026-01-13 21:46:06 - Looking for condition: 'P', caseType: permanent, isPermanent: 1
2026-01-13 21:46:06 - Found condition_id: 16 for 'P' in column code
2026-01-13 21:46:06 - Inserting condition: visit_id=34, tooth_id=11, condition_id=16, box_key='R3-10', color='blue', case_type='permanent'
2026-01-13 21:46:06 - Condition inserted successfully
2026-01-13 21:46:06 - Processing item 2: Array
(
    [type] => treatment
    [tooth_id] => 11
    [treatment_code] => FV
    [box_key] => R4-10
    [color] => 
    [case_type] => permanent
)

2026-01-13 21:46:06 - Resolving tooth_id for: '11'
2026-01-13 21:46:06 - Found tooth by tooth_id: 11 => 11
2026-01-13 21:46:06 - Item details: type=treatment, tooth=11, box=R4-10
2026-01-13 21:46:06 - Processing treatment: 'FV'
2026-01-13 21:46:06 - Looking for treatment: 'FV'
2026-01-13 21:46:06 - Found treatment_id: 8 for 'FV'
2026-01-13 21:46:06 - Inserting treatment: visit_id=34, tooth_id=11, treatment_id=8, box_key='R4-10', color='', case_type='permanent'
2026-01-13 21:46:06 - Treatment inserted successfully
2026-01-13 21:46:06 - Transaction committed successfully. Inserted: 3 items
2026-01-13 21:46:06 - Sending response: {"success":true,"visit_id":"34","inserted":3,"conditions_count":2,"treatments_count":1,"warnings":[],"logged_by":null}
2026-01-13 21:47:19 - Received save request: {"action":"save","patient_id":"8","visit_id":"0","visit_date":"2026-01-13","oral_data":[{"type":"condition","tooth_id":"45","condition_code":"M","box_key":"T-73-center","color":"red","case_type":"temporary"},{"type":"condition","tooth_id":"11","condition_code":"M","box_key":"R3-10","color":"red","case_type":"temporary"},{"type":"treatment","tooth_id":"11","treatment_code":"PFS","box_key":"R4-10","color":"","case_type":"permanent"}]}
2026-01-13 21:47:19 - Parsed input: Array
(
    [action] => save
    [patient_id] => 8
    [visit_id] => 0
    [visit_date] => 2026-01-13
    [oral_data] => Array
        (
            [0] => Array
                (
                    [type] => condition
                    [tooth_id] => 45
                    [condition_code] => M
                    [box_key] => T-73-center
                    [color] => red
                    [case_type] => temporary
                )

            [1] => Array
                (
                    [type] => condition
                    [tooth_id] => 11
                    [condition_code] => M
                    [box_key] => R3-10
                    [color] => red
                    [case_type] => temporary
                )

            [2] => Array
                (
                    [type] => treatment
                    [tooth_id] => 11
                    [treatment_code] => PFS
                    [box_key] => R4-10
                    [color] => 
                    [case_type] => permanent
                )

        )

)

2026-01-13 21:47:19 - Starting transaction
2026-01-13 21:47:19 - Created new visit_id: 35 for patient: 8 with date: 2026-01-13
2026-01-13 21:47:19 - Processing item 0: Array
(
    [type] => condition
    [tooth_id] => 45
    [condition_code] => M
    [box_key] => T-73-center
    [color] => red
    [case_type] => temporary
)

2026-01-13 21:47:19 - Resolving tooth_id for: '45'
2026-01-13 21:47:19 - Found tooth by tooth_id: 45 => 45
2026-01-13 21:47:19 - Item details: type=condition, tooth=45, box=T-73-center
2026-01-13 21:47:19 - Processing condition: 'M', caseType: temporary
2026-01-13 21:47:19 - Looking for condition: 'M', caseType: temporary, isPermanent: 0
2026-01-13 21:47:19 - Found condition_id: 7 for 'M' in column code
2026-01-13 21:47:19 - Inserting condition: visit_id=35, tooth_id=45, condition_id=7, box_key='T-73-center', color='red', case_type='temporary'
2026-01-13 21:47:19 - Condition inserted successfully
2026-01-13 21:47:19 - Processing item 1: Array
(
    [type] => condition
    [tooth_id] => 11
    [condition_code] => M
    [box_key] => R3-10
    [color] => red
    [case_type] => temporary
)

2026-01-13 21:47:19 - Resolving tooth_id for: '11'
2026-01-13 21:47:19 - Found tooth by tooth_id: 11 => 11
2026-01-13 21:47:19 - Item details: type=condition, tooth=11, box=R3-10
2026-01-13 21:47:19 - Processing condition: 'M', caseType: temporary
2026-01-13 21:47:19 - Looking for condition: 'M', caseType: temporary, isPermanent: 0
2026-01-13 21:47:19 - Found condition_id: 7 for 'M' in column code
2026-01-13 21:47:19 - Inserting condition: visit_id=35, tooth_id=11, condition_id=7, box_key='R3-10', color='red', case_type='temporary'
2026-01-13 21:47:19 - Condition inserted successfully
2026-01-13 21:47:19 - Processing item 2: Array
(
    [type] => treatment
    [tooth_id] => 11
    [treatment_code] => PFS
    [box_key] => R4-10
    [color] => 
    [case_type] => permanent
)

2026-01-13 21:47:19 - Resolving tooth_id for: '11'
2026-01-13 21:47:19 - Found tooth by tooth_id: 11 => 11
2026-01-13 21:47:19 - Item details: type=treatment, tooth=11, box=R4-10
2026-01-13 21:47:19 - Processing treatment: 'PFS'
2026-01-13 21:47:19 - Looking for treatment: 'PFS'
2026-01-13 21:47:19 - Found treatment_id: 10 for 'PFS'
2026-01-13 21:47:19 - Inserting treatment: visit_id=35, tooth_id=11, treatment_id=10, box_key='R4-10', color='', case_type='permanent'
2026-01-13 21:47:19 - Treatment inserted successfully
2026-01-13 21:47:19 - Transaction committed successfully. Inserted: 3 items
2026-01-13 21:47:19 - Sending response: {"success":true,"visit_id":"35","inserted":3,"conditions_count":2,"treatments_count":1,"warnings":[],"logged_by":null}
